{"ast":null,"code":"var _jsxFileName = \"/Users/plsingh/Downloads/archive-19Sep-Sunday/src/pages/WorkOrder/Manage/index.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState, useCallback, useRef } from \"react\";\nimport { useHistory, useRouteMatch } from 'react-router-dom';\nimport TabContainer from \"../../../components/TabContainer/index.jsx\";\nimport PageHeader from \"../../../components/PageHeader/index.jsx\";\nimport ActionPanel from \"./ActionPanel/index.jsx\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport actions from \"../../../actions/index.js\";\nimport { makeStyles } from \"@material-ui/core\";\nimport { selectors } from \"../../../reducers/index.js\";\nimport FormWrapper from \"../../../components/Form/FormWrapper\";\nimport WOForm from \"./Form.jsx\";\nimport { WO_TABS } from './constant';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Ext = window.Ext;\nconst useStyles = makeStyles({\n  topSection: {\n    height: `calc(100vh - 43px)`,\n    display: 'flex',\n    flexDirection: 'column'\n  }\n});\nconst tabsData = [{\n  index: 1,\n  title: \"WO Info\",\n  type: WO_TABS.WO_INFO,\n  active: true\n}, {\n  index: 2,\n  type: WO_TABS.DETAIL,\n  title: \"Other Details\"\n}, {\n  index: 3,\n  type: WO_TABS.ATTACHMENT,\n  title: \"Attachments\"\n}];\nexport default function ManageWorkOrder() {\n  _s();\n\n  const classes = useStyles();\n  const refToTop = useRef();\n  const match = useRouteMatch();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const {\n    id\n  } = match.params;\n  const {\n    saveErrorMsg,\n    workOrderNo,\n    saveStatus\n  } = useSelector(state => selectors.workOrder(state), shallowEqual);\n  const fileListError = useSelector(state => {\n    const {\n      value\n    } = selectors.workOrder(state);\n    return (value === null || value === void 0 ? void 0 : value.fileListError) || '';\n  });\n  useEffect(() => {\n    dispatch(actions.workOrder.update.init('new'));\n  }, [dispatch, id]);\n  const [activeTab, setActiveTab] = useState(1);\n\n  const onTabChange = index => {\n    setActiveTab(index);\n  };\n\n  const handleFieldChange = useCallback((field, value) => {\n    dispatch(actions.workOrder.update.patchField(field, value));\n  }, [dispatch]);\n  useEffect(() => {\n    if (saveErrorMsg) {\n      Ext.Msg.alert(\"Error\", saveErrorMsg);\n      Ext.Msg.setHideAnimation(null);\n    }\n  }, [saveErrorMsg]);\n  useEffect(() => {\n    return () => {\n      dispatch(actions.workOrder.update.clean());\n    };\n  }, [dispatch]);\n  useEffect(() => {\n    if (fileListError) {\n      Ext.Msg.alert(\"Error\", fileListError);\n      Ext.Msg.setHideAnimation(null);\n    }\n  }, [fileListError]);\n  useEffect(() => {\n    if (saveStatus === 'completed') {\n      Ext.Msg.alert(\"Work Order created\", `Request No: ${workOrderNo}`);\n      Ext.Msg.setHideAnimation(null);\n      setTimeout(() => {\n        history.goBack();\n      }, 1000);\n    }\n  }, [history, saveStatus, workOrderNo]);\n  useEffect(() => {\n    var _refToTop$current;\n\n    refToTop === null || refToTop === void 0 ? void 0 : (_refToTop$current = refToTop.current) === null || _refToTop$current === void 0 ? void 0 : _refToTop$current.scrollIntoView();\n  }, [activeTab]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.topSection,\n      children: [/*#__PURE__*/_jsxDEV(PageHeader, {\n        showNav: true,\n        title: \"Create Work Order\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TabContainer, {\n        tabsData: tabsData,\n        activeTab: activeTab,\n        onChange: onTabChange,\n        showCount: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormWrapper, {\n        wrapperRef: refToTop,\n        children: /*#__PURE__*/_jsxDEV(WOForm, {\n          activeTab: tabsData[activeTab - 1].type,\n          onFieldChange: handleFieldChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ActionPanel, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(ManageWorkOrder, \"qWYcybA/HyVFHy+h3QQyY3e21FA=\", false, function () {\n  return [useStyles, useRouteMatch, useDispatch, useHistory, useSelector, useSelector];\n});\n\n_c = ManageWorkOrder;\n\nvar _c;\n\n$RefreshReg$(_c, \"ManageWorkOrder\");","map":{"version":3,"sources":["/Users/plsingh/Downloads/archive-19Sep-Sunday/src/pages/WorkOrder/Manage/index.jsx"],"names":["useEffect","useState","useCallback","useRef","useHistory","useRouteMatch","TabContainer","PageHeader","ActionPanel","shallowEqual","useDispatch","useSelector","actions","makeStyles","selectors","FormWrapper","WOForm","WO_TABS","Ext","window","useStyles","topSection","height","display","flexDirection","tabsData","index","title","type","WO_INFO","active","DETAIL","ATTACHMENT","ManageWorkOrder","classes","refToTop","match","dispatch","history","id","params","saveErrorMsg","workOrderNo","saveStatus","state","workOrder","fileListError","value","update","init","activeTab","setActiveTab","onTabChange","handleFieldChange","field","patchField","Msg","alert","setHideAnimation","clean","setTimeout","goBack","current","scrollIntoView"],"mappings":"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","sourcesContent":["import { useEffect, useState, useCallback, useRef } from \"react\";\nimport { useHistory, useRouteMatch } from 'react-router-dom';\nimport TabContainer from \"../../../components/TabContainer/index.jsx\";\nimport PageHeader from \"../../../components/PageHeader/index.jsx\";\nimport ActionPanel from \"./ActionPanel/index.jsx\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport actions from \"../../../actions/index.js\";\nimport { makeStyles } from \"@material-ui/core\";\nimport { selectors } from \"../../../reducers/index.js\";\nimport FormWrapper from \"../../../components/Form/FormWrapper\";\nimport WOForm from \"./Form.jsx\";\nimport { WO_TABS } from './constant'\nconst Ext = window.Ext;\n\nconst useStyles = makeStyles({\n  topSection: {\n    height: `calc(100vh - 43px)`,\n    display: 'flex',\n    flexDirection: 'column'\n  },\n});\n\nconst tabsData = [\n  {\n    index: 1,\n    title: \"WO Info\",\n    type: WO_TABS.WO_INFO,\n    active: true,\n  },\n  {\n    index: 2,\n    type: WO_TABS.DETAIL,\n    title: \"Other Details\",\n  },\n  {\n    index: 3,\n    type: WO_TABS.ATTACHMENT,\n    title: \"Attachments\",\n  },\n];\nexport default function ManageWorkOrder() {\n  const classes = useStyles();\n  const refToTop = useRef();\n  const match = useRouteMatch();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const { id } = match.params;\n  const { saveErrorMsg, workOrderNo, saveStatus } = useSelector(state => selectors.workOrder(state), shallowEqual);\n  const  fileListError =  useSelector(state => {\n    const {value} = selectors.workOrder(state);\n    return value?.fileListError || ''\n  });\n  useEffect(() => {\n    dispatch(actions.workOrder.update.init('new'));\n  }, [dispatch, id])\n\n  const [activeTab, setActiveTab] = useState(1);\n\n  const onTabChange = index => {\n    setActiveTab(index);\n  };\n\n  const handleFieldChange = useCallback((field, value) => {\n    dispatch(actions.workOrder.update.patchField(field, value));\n  }, [dispatch])\n\n  useEffect(() => {\n    if (saveErrorMsg) {\n      Ext.Msg.alert(\"Error\", saveErrorMsg);\n      Ext.Msg.setHideAnimation(null);\n    }\n  }, [saveErrorMsg])\n\n  useEffect(() => {\n    return (() => {\n      dispatch(actions.workOrder.update.clean());\n    })\n  }, [dispatch])\n\n  useEffect(() => {\n    if (fileListError) {\n      Ext.Msg.alert(\"Error\", fileListError);\n      Ext.Msg.setHideAnimation(null);\n    }\n  }, [fileListError])\n\n  useEffect(() => {\n    if (saveStatus === 'completed') {\n      Ext.Msg.alert(\"Work Order created\", `Request No: ${workOrderNo}`);\n      Ext.Msg.setHideAnimation(null);\n      setTimeout(() => {\n        history.goBack();\n      }, 1000)\n\n    }\n  }, [history, saveStatus, workOrderNo])\n\n  useEffect(() => {\n    refToTop?.current?.scrollIntoView();\n  }, [activeTab])\n  return (\n    <>\n      <div className={classes.topSection} >\n        <PageHeader\n          showNav\n          title='Create Work Order'\n        />\n        <TabContainer\n          tabsData={tabsData}\n          activeTab={activeTab}\n          onChange={onTabChange}\n          showCount={false}\n        />\n        <FormWrapper wrapperRef={refToTop}>\n          <WOForm activeTab={tabsData[activeTab - 1].type} onFieldChange={handleFieldChange} />\n        </FormWrapper>\n        <ActionPanel />\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}