{"ast":null,"code":"var _jsxFileName = \"/Users/plsingh/Downloads/archive-19Sep-Sunday/src/components/AttachmentsV2/index.jsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport { makeStyles } from \"@material-ui/styles\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport DocumentThumbnail from \"../DocumentThumbnail\";\nimport classnames from \"classnames\";\nimport Grid from \"@material-ui/core/Grid\";\nimport clsx from 'clsx';\nimport CameraIcon from \"../../assets/Icons/CameraIcon\";\nimport CapturePhoto from \"../CapturePhoto\";\nimport FullScreenDialog from \"../FullScreenDialog\";\nimport { useMemo } from \"react\";\nimport Lightbox from 'react-image-lightbox';\nimport 'react-image-lightbox/style.css'; // This only needs to be imported once in your app\n\nimport { useCallback } from \"react\";\nimport { Document, Page, pdfjs } from 'react-pdf';\nimport NoImageIcon from \"../../assets/Icons/NoImageIcon\";\nimport ExpandWhiteIcon from \"../../assets/Icons/ExpandWhiteIcon\";\nimport ExpandIcon from \"../../assets/Icons/ExpandIcon\";\nimport EditImageIcon from \"../../assets/Icons/EditImageIcon\";\nimport PDFImage from \"../../assets/img/pdf.png\";\nimport DeleteAttachmentIcon from \"../../assets/Icons/DeleteAttachmentIcon\";\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\"; // requires a loader\n\nimport { Carousel } from 'react-responsive-carousel';\nimport AttachIcon from \"../../assets/Icons/AttachIcon\";\nimport IconButton from \"../IconButton\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectors } from \"../../reducers\";\nimport actions from \"../../actions\";\nimport Spinner from \"../Spinner\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\npdfjs.GlobalWorkerOptions.workerSrc = '/pdf.worker.min.js';\nconst useStyles = makeStyles({\n  paper: {\n    textAlign: \"center\"\n  },\n  fieldsetWrapper: {\n    padding: \"12px 12px 3px 12px\",\n    \"& .x-button.x-has-text .x-inner-el\": {\n      padding: \"3px 12px\"\n    },\n    \"& .x-button.x-has-text .x-text-el\": {\n      color: \"#ffffff\",\n      textTransform: \"capitalize\"\n    }\n  },\n  extraSpacing: {\n    paddingLeft: \"20px\"\n  },\n  editIcon: {\n    position: \"absolute\",\n    textAlign: 'right',\n    right: 4,\n    bottom: 90,\n    zIndex: \"999\"\n  },\n  attachIcon: {\n    position: \"absolute\",\n    right: props => props.slideView ? 4 : \"30px\",\n    bottom: props => props.slideView ? 90 : 180,\n    zIndex: \"999\"\n  },\n  cameraIcon: {\n    position: \"absolute\",\n    right: props => props.slideView ? 4 : \"30px\",\n    bottom: props => props.slideView ? 50 : 120,\n    zIndex: \"999\"\n  },\n  plusIcon: {\n    position: \"absolute\",\n    right: props => props.slideView ? 4 : \"30px\",\n    bottom: props => props.slideView ? 10 : \"50px\",\n    float: 'right',\n    zIndex: \"999\",\n    color: \"#0073E6\" // fontSize: \"60px\",\n\n  },\n  deleteFileSlideIcon: {\n    position: \"absolute\",\n    right: 4,\n    bottom: 50,\n    float: 'right',\n    zIndex: \"999\",\n    color: \"#0073E6\"\n  },\n  crossIcon: {\n    position: \"fixed\",\n    right: \"30px\",\n    bottom: 90,\n    zIndex: \"999\",\n    color: \"#5C677D\",\n    fontSize: \"60px\"\n  },\n  spinner: {\n    margin: 'auto'\n  },\n  slide: {\n    height: '100%',\n    width: '100%'\n  },\n  carousel: {\n    width: '100%',\n    height: '100%',\n    '& > .carousel-slider': {\n      width: '100%',\n      height: '100%',\n      '& > .control-dots': {\n        bottom: 0,\n        margin: 0\n      },\n      '& > .slider-wrapper': {\n        width: '100%',\n        border: '1px solid #E9EBEF',\n        borderRadius: 5,\n        height: 'calc(100% - 16px)',\n        '& > .slider': {\n          width: '100%',\n          height: '100%'\n        }\n      }\n    },\n    '& > .slider-wrapper': {\n      width: '100%',\n      height: '100%'\n    }\n  },\n  imgSlider: {\n    height: '100%',\n    backgroundSize: 'cover',\n    backgroundRepeat: 'no-repeat',\n    width: '100%',\n    display: 'flex'\n  },\n  withAttachment: {\n    border: '0px !important'\n  },\n  noImageText: {\n    color: '#5e5e5e',\n    fontSize: 13,\n    marginTop: '5%',\n    textAlign: 'center'\n  },\n  noFileText: {\n    color: '#5e5e5e',\n    fontSize: 13,\n    marginTop: '5%',\n    textAlign: 'center'\n  },\n  fabWrapperRelative: {\n    position: 'relative'\n  },\n  noFileTextSlider: {\n    color: '#5e5e5e',\n    fontSize: 13,\n    margin: 'auto',\n    textAlign: 'center'\n  },\n  slideContainer: {\n    display: 'flex',\n    height: '100%',\n    width: '100%'\n  },\n  slideWrapper: {\n    background: '#FFFFFF',\n    height: 184,\n    width: '100%',\n    border: '1px solid #E9EBEF',\n    borderRadius: 5\n  },\n  icon: {\n    '& > svg': {\n      width: props => props.slideView ? '45px' : \"\",\n      height: props => props.slideView ? '45px' : \"\"\n    }\n  }\n});\nconst indicatorStyles = {\n  background: 'rgba(4, 102, 200, 0.2)',\n  width: 8,\n  height: 8,\n  display: 'inline-block',\n  margin: '0 8px'\n};\n\nfunction getBase64(file, cb) {\n  let reader = new FileReader();\n  reader.readAsDataURL(file);\n\n  reader.onload = function () {\n    cb(reader.result);\n  };\n\n  reader.onerror = function (error) {\n    console.log('Error: ', error);\n  };\n}\n\nconst imgThumbnail = (type, base64Img) => {\n  if (type.includes('image/')) {\n    return base64Img;\n  }\n\n  return PDFImage;\n};\n\nexport default function AttachmentsV2(props) {\n  _s();\n\n  const {\n    slideView,\n    onUpload,\n    onDelete,\n    files,\n    isReadOnly = false\n  } = props;\n  const classes = useStyles(props);\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [pdf, setPDF] = useState(null);\n  const [showImages, setShowImages] = useState(false);\n  const [photoIndex, setPhotoIndex] = useState(0);\n  const [shouldTakePhoto, setShouldTakePhoto] = useState(false);\n  const [activeAttachment, setActiveAttachment] = useState(null);\n  const inputFile = useRef(null);\n\n  const handleAttachFileClick = () => {\n    // `current` points to the mounted file input element\n    inputFile.current.click();\n    setIsExpanded(false);\n  };\n\n  const handleFileUpload = event => {\n    event.stopPropagation();\n    event.preventDefault();\n    var [file] = event.target.files;\n    onUpload(file);\n  };\n\n  const images = useMemo(() => {\n    return files.filter(file => {\n      var _file$filesMainRef;\n\n      return (file === null || file === void 0 ? void 0 : (_file$filesMainRef = file.filesMainRef) === null || _file$filesMainRef === void 0 ? void 0 : _file$filesMainRef.indexOf('.png')) !== -1 || file.filesMainRef.indexOf('.jpeg') !== -1;\n    });\n  }, [files]);\n\n  const renderExpandIcon = () => {\n    if (slideView) {\n      return /*#__PURE__*/_jsxDEV(ExpandWhiteIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 15\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(ExpandIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 13\n    }, this);\n  };\n\n  const renderCollapseIcon = () => {\n    if (slideView) {\n      return /*#__PURE__*/_jsxDEV(ExpandWhiteIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 15\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(ExpandIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 13\n    }, this);\n  };\n\n  const renderIcons = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: clsx({\n        [classes.fabWrapperRelative]: slideView\n      }),\n      children: [isExpanded ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.attachIcon,\n          children: /*#__PURE__*/_jsxDEV(IconButton, {\n            onClick: handleAttachFileClick,\n            className: classes.icon,\n            children: slideView ? /*#__PURE__*/_jsxDEV(AttachIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 30\n            }, this) : /*#__PURE__*/_jsxDEV(AttachIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 47\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.cameraIcon,\n          children: /*#__PURE__*/_jsxDEV(IconButton, {\n            onClick: () => {\n              setShouldTakePhoto(true);\n            },\n            className: classes.icon,\n            children: slideView ? /*#__PURE__*/_jsxDEV(CameraIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 30\n            }, this) : /*#__PURE__*/_jsxDEV(CameraIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 47\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : null, /*#__PURE__*/_jsxDEV(IconButton, {\n        className: clsx(classes.icon, classes.plusIcon),\n        onClick: () => {\n          setIsExpanded(!isExpanded);\n        },\n        children: isExpanded ? renderCollapseIcon() : renderExpandIcon()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this), !isExpanded && slideView && files.length ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.editIcon,\n          children: /*#__PURE__*/_jsxDEV(IconButton, {\n            onClick: handleAttachFileClick,\n            className: classes.icon,\n            children: /*#__PURE__*/_jsxDEV(EditImageIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.deleteFileSlideIcon,\n          children: /*#__PURE__*/_jsxDEV(IconButton, {\n            onClick: handleDeleteClick,\n            className: classes.icon,\n            children: /*#__PURE__*/_jsxDEV(DeleteAttachmentIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 7\n    }, this);\n  };\n\n  const handlePhotoClick = dataUri => {\n    const fileName = new Date().getTime() + '.png';\n    fetch(dataUri).then(res => res.blob()).then(blob => {\n      const file = new File([blob], fileName, {\n        type: \"image/png\"\n      });\n      onUpload(file, dataUri);\n    });\n    handlePhotoClickClose();\n  };\n\n  const handlePhotoClickClose = () => {\n    setShouldTakePhoto(false);\n    setIsExpanded(false);\n  };\n\n  const handleClick = useCallback((file, index) => {\n    if (file.filesMainRef.indexOf('.png') !== -1 || file.filesMainRef.indexOf('.jpeg') !== -1) {\n      setPhotoIndex(index);\n      setShowImages(true);\n      return;\n    } else if (file.filesMainRef.indexOf('.pdf') !== -1) {\n      setPDF(file);\n    }\n  }, []);\n  const handleCorouselStatusChange = useCallback(activeItem => {\n    if (activeItem - 1 !== activeAttachment) setActiveAttachment(activeItem - 1);\n  }, [activeAttachment]);\n  const handleDeleteClick = useCallback(() => {\n    if (files.length) {\n      onDelete(files[activeAttachment].filesIndividualRef);\n    }\n  }, [activeAttachment, files, onDelete]);\n\n  const renderSlideView = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.slideContainer,\n      children: [/*#__PURE__*/_jsxDEV(Carousel, {\n        className: classes.carousel,\n        statusFormatter: handleCorouselStatusChange,\n        showThumbs: false,\n        renderIndicator: (onClickHandler, isSelected, index, label) => {\n          if (isSelected) {\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              style: { ...indicatorStyles,\n                background: '#0073E6'\n              },\n              \"aria-label\": `Selected: ${label} ${index + 1}`,\n              title: `Selected: ${label} ${index + 1}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 17\n            }, this);\n          }\n\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            style: indicatorStyles,\n            onClick: onClickHandler,\n            onKeyDown: onClickHandler,\n            value: index,\n            role: \"button\",\n            tabIndex: 0,\n            title: `${label} ${index + 1}`,\n            \"aria-label\": `${label} ${index + 1}`\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 15\n          }, this);\n        },\n        children: files.map((f, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.slide,\n          onClick: () => handleClick(f, index),\n          children: /*#__PURE__*/_jsxDEV(AttachmentContent, {\n            className: classes.imgSlider,\n            value: f\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 15\n          }, this)\n        }, `${f.name}-${f.type}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 9\n      }, this), !files.length ? /*#__PURE__*/_jsxDEV(\"span\", {\n        className: classes.noFileTextSlider,\n        children: [/*#__PURE__*/_jsxDEV(NoImageIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: classes.noImageText,\n          children: `No Attachment.${isReadOnly ? '' : ' Press ‘+’ Add'}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 11\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 7\n    }, this);\n  };\n\n  const renderGridView = () => {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classnames(classes.fieldsetWrapper, classes.extraSpacing),\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: files.map((f, ind) => /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            onClick: () => handleClick(f, ind),\n            children: /*#__PURE__*/_jsxDEV(DocumentThumbnail, { ...f\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 17\n            }, this)\n          }, `${f.filesIndividualRef}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: !files.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.noFileText,\n          children: \"No files uploaded yet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 13\n        }, this) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: clsx({\n        [classes.slideWrapper]: slideView,\n        [classes.withAttachment]: files.length\n      }),\n      children: [slideView ? renderSlideView() : renderGridView(), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"addAttachmentWorkflow\" // accept=\"image/png, image/gif, image/jpeg,\n        //     application/pdf,application/msword,\n        //     application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n        ,\n        accept: \"image/png, image/jpeg, application/pdf\",\n        ref: inputFile,\n        style: {\n          display: 'none'\n        },\n        onClick: event => {\n          event.target.value = null;\n        },\n        onInput: handleFileUpload\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 9\n      }, this), !isReadOnly ? renderIcons() : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 7\n    }, this), shouldTakePhoto && /*#__PURE__*/_jsxDEV(FullScreenDialog, {\n      modalTitle: \"Take Photo\",\n      open: true,\n      modalContent: /*#__PURE__*/_jsxDEV(CapturePhoto, {\n        onPhotoClick: handlePhotoClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 13\n      }, this),\n      onClose: handlePhotoClickClose\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 9\n    }, this), showImages && /*#__PURE__*/_jsxDEV(ImagePreview, {\n      currentFile: images[photoIndex],\n      nextFile: images[(photoIndex + 1) % images.length],\n      prevFile: images[(photoIndex + images.length - 1) % images.length],\n      onCloseRequest: () => setShowImages(false),\n      onMovePrevRequest: () => {\n        setPhotoIndex((photoIndex + images.length - 1) % images.length);\n      },\n      onMoveNextRequest: () => {\n        setPhotoIndex((photoIndex + 1) % images.length);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 9\n    }, this), pdf && /*#__PURE__*/_jsxDEV(FullScreenDialog, {\n      modalTitle: pdf.name,\n      open: true,\n      modalContent: /*#__PURE__*/_jsxDEV(Document, {\n        file: pdf.base64Data,\n        children: /*#__PURE__*/_jsxDEV(Page, {\n          pageNumber: 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 13\n      }, this),\n      onClose: () => {\n        setPDF(undefined);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(AttachmentsV2, \"EVYoC5U4/NuUKhr/s7BYD+4a4FU=\", false, function () {\n  return [useStyles];\n});\n\n_c = AttachmentsV2;\nconst emptyObj = {};\nexport function AttachmentContent({\n  className,\n  value = emptyObj\n}) {\n  _s2();\n\n  const classes = useStyles();\n  const {\n    filesIndividualRef,\n    filesMainRef,\n    relativePath\n  } = value;\n  const dispatch = useDispatch();\n  const imgObj = useSelector(state => {\n    return selectors.assets(state, {\n      fileId: filesIndividualRef,\n      relativePath: relativePath\n    });\n  });\n  const byte64Url = useMemo(() => {\n    if ((filesMainRef === null || filesMainRef === void 0 ? void 0 : filesMainRef.indexOf('.png')) !== -1 || filesMainRef.indexOf('.jpeg') !== -1) {\n      if (imgObj === null || imgObj === void 0 ? void 0 : imgObj.byteArr) {\n        var binary = '';\n        var bytes = new Uint8Array(imgObj.byteArr);\n        var len = bytes.byteLength;\n\n        for (var i = 0; i < len; i++) {\n          binary += String.fromCharCode(bytes[i]);\n        }\n\n        var payloadData = 'data:image/jpeg;base64,' + window.btoa(binary);\n        return payloadData;\n      }\n    } else {\n      return PDFImage;\n    }\n  }, [filesMainRef, imgObj.byteArr]);\n  useEffect(() => {\n    if (imgObj && !('status' in imgObj)) {\n      dispatch(actions.assets.request({\n        fileId: filesIndividualRef,\n        relativePath\n      }));\n    }\n  }, [dispatch, filesIndividualRef, imgObj, relativePath]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: className,\n    style: {\n      backgroundImage: `url(${byte64Url})`\n    },\n    children: (imgObj === null || imgObj === void 0 ? void 0 : imgObj.status) === 'requested' ? /*#__PURE__*/_jsxDEV(Spinner, {\n      type: \"beat\",\n      speed: 0.5,\n      className: classes.spinner,\n      size: 50\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 9\n    }, this) : null\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 522,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(AttachmentContent, \"ZzNhBJy1ijHzs+qeR1xlg0GCIHo=\", false, function () {\n  return [useStyles, useDispatch, useSelector];\n});\n\n_c2 = AttachmentContent;\n\nfunction ImagePreview({\n  currentFile,\n  nextFile,\n  prevFile,\n  ...others\n}) {\n  _s3();\n\n  const currImgObj = useSelector(state => {\n    return selectors.assets(state, {\n      fileId: currentFile.filesIndividualRef,\n      relativePath: currentFile.relativePath\n    });\n  });\n  const nextImgObj = useSelector(state => {\n    return selectors.assets(state, {\n      fileId: nextFile.filesIndividualRef,\n      relativePath: nextFile.relativePath\n    });\n  });\n  const prevImgObj = useSelector(state => {\n    return selectors.assets(state, {\n      fileId: prevFile.filesIndividualRef,\n      relativePath: prevFile.relativePath\n    });\n  });\n  const currbyte64Url = useMemo(() => {\n    if (currImgObj === null || currImgObj === void 0 ? void 0 : currImgObj.byteArr) {\n      var binary = '';\n      var bytes = new Uint8Array(currImgObj.byteArr);\n      var len = bytes.byteLength;\n\n      for (var i = 0; i < len; i++) {\n        binary += String.fromCharCode(bytes[i]);\n      }\n\n      var payloadData = 'data:image/jpeg;base64,' + window.btoa(binary);\n      return payloadData;\n    }\n  }, [currImgObj.byteArr]);\n  const nextbyte64Url = useMemo(() => {\n    if (nextImgObj === null || nextImgObj === void 0 ? void 0 : nextImgObj.byteArr) {\n      var binary = '';\n      var bytes = new Uint8Array(nextImgObj.byteArr);\n      var len = bytes.byteLength;\n\n      for (var i = 0; i < len; i++) {\n        binary += String.fromCharCode(bytes[i]);\n      }\n\n      var payloadData = 'data:image/jpeg;base64,' + window.btoa(binary);\n      return payloadData;\n    }\n  }, [nextImgObj.byteArr]);\n  const prevbyte64Url = useMemo(() => {\n    if (prevImgObj === null || prevImgObj === void 0 ? void 0 : prevImgObj.byteArr) {\n      var binary = '';\n      var bytes = new Uint8Array(prevImgObj.byteArr);\n      var len = bytes.byteLength;\n\n      for (var i = 0; i < len; i++) {\n        binary += String.fromCharCode(bytes[i]);\n      }\n\n      var payloadData = 'data:image/jpeg;base64,' + window.btoa(binary);\n      return payloadData;\n    }\n  }, [prevImgObj.byteArr]);\n  return /*#__PURE__*/_jsxDEV(Lightbox, {\n    mainSrc: currbyte64Url,\n    nextSrc: nextbyte64Url,\n    prevSrc: prevbyte64Url,\n    ...others\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 590,\n    columnNumber: 5\n  }, this);\n}\n\n_s3(ImagePreview, \"81PWChsJaQgszUdRPmmPGNTixT8=\", false, function () {\n  return [useSelector, useSelector, useSelector];\n});\n\n_c3 = ImagePreview;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"AttachmentsV2\");\n$RefreshReg$(_c2, \"AttachmentContent\");\n$RefreshReg$(_c3, \"ImagePreview\");","map":{"version":3,"sources":["/Users/plsingh/Downloads/archive-19Sep-Sunday/src/components/AttachmentsV2/index.jsx"],"names":["makeStyles","React","useEffect","useRef","useState","DocumentThumbnail","classnames","Grid","clsx","CameraIcon","CapturePhoto","FullScreenDialog","useMemo","Lightbox","useCallback","Document","Page","pdfjs","NoImageIcon","ExpandWhiteIcon","ExpandIcon","EditImageIcon","PDFImage","DeleteAttachmentIcon","Carousel","AttachIcon","IconButton","useDispatch","useSelector","selectors","actions","Spinner","GlobalWorkerOptions","workerSrc","useStyles","paper","textAlign","fieldsetWrapper","padding","color","textTransform","extraSpacing","paddingLeft","editIcon","position","right","bottom","zIndex","attachIcon","props","slideView","cameraIcon","plusIcon","float","deleteFileSlideIcon","crossIcon","fontSize","spinner","margin","slide","height","width","carousel","border","borderRadius","imgSlider","backgroundSize","backgroundRepeat","display","withAttachment","noImageText","marginTop","noFileText","fabWrapperRelative","noFileTextSlider","slideContainer","slideWrapper","background","icon","indicatorStyles","getBase64","file","cb","reader","FileReader","readAsDataURL","onload","result","onerror","error","console","log","imgThumbnail","type","base64Img","includes","AttachmentsV2","onUpload","onDelete","files","isReadOnly","classes","isExpanded","setIsExpanded","pdf","setPDF","showImages","setShowImages","photoIndex","setPhotoIndex","shouldTakePhoto","setShouldTakePhoto","activeAttachment","setActiveAttachment","inputFile","handleAttachFileClick","current","click","handleFileUpload","event","stopPropagation","preventDefault","target","images","filter","filesMainRef","indexOf","renderExpandIcon","renderCollapseIcon","renderIcons","length","handleDeleteClick","handlePhotoClick","dataUri","fileName","Date","getTime","fetch","then","res","blob","File","handlePhotoClickClose","handleClick","index","handleCorouselStatusChange","activeItem","filesIndividualRef","renderSlideView","onClickHandler","isSelected","label","map","f","name","renderGridView","ind","value","base64Data","undefined","emptyObj","AttachmentContent","className","relativePath","dispatch","imgObj","state","assets","fileId","byte64Url","byteArr","binary","bytes","Uint8Array","len","byteLength","i","String","fromCharCode","payloadData","window","btoa","request","backgroundImage","status","ImagePreview","currentFile","nextFile","prevFile","others","currImgObj","nextImgObj","prevImgObj","currbyte64Url","nextbyte64Url","prevbyte64Url"],"mappings":";;;;;AAAA,SAASA,UAAT,QAA2B,qBAA3B;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,MAA3B,EAAmCC,QAAnC,QAAmD,OAAnD;AACA,OAAOC,iBAAP,MAA8B,sBAA9B;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,UAAP,MAAuB,+BAAvB;AACA,OAAOC,YAAP,MAAyB,iBAAzB;AACA,OAAOC,gBAAP,MAA6B,qBAA7B;AACA,SAASC,OAAT,QAAwB,OAAxB;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,OAAO,gCAAP,C,CAAyC;;AACzC,SAASC,WAAT,QAA4B,OAA5B;AACA,SAASC,QAAT,EAAmBC,IAAnB,EAAyBC,KAAzB,QAAsC,WAAtC;AACA,OAAOC,WAAP,MAAwB,gCAAxB;AACA,OAAOC,eAAP,MAA4B,oCAA5B;AACA,OAAOC,UAAP,MAAuB,+BAAvB;AACA,OAAOC,aAAP,MAA0B,kCAA1B;AACA,OAAOC,QAAP,MAAqB,0BAArB;AACA,OAAOC,oBAAP,MAAiC,yCAAjC;AACA,OAAO,uDAAP,C,CAAgE;;AAChE,SAASC,QAAT,QAAyB,2BAAzB;AACA,OAAOC,UAAP,MAAuB,+BAAvB;AACA,OAAOC,UAAP,MAAuB,eAAvB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,SAAT,QAA0B,gBAA1B;AACA,OAAOC,OAAP,MAAoB,eAApB;AACA,OAAOC,OAAP,MAAoB,YAApB;;;AAEAd,KAAK,CAACe,mBAAN,CAA0BC,SAA1B,GAAsC,oBAAtC;AAGA,MAAMC,SAAS,GAAGlC,UAAU,CAAC;AAC3BmC,EAAAA,KAAK,EAAE;AACLC,IAAAA,SAAS,EAAE;AADN,GADoB;AAI3BC,EAAAA,eAAe,EAAE;AACfC,IAAAA,OAAO,EAAE,oBADM;AAEf,0CAAsC;AACpCA,MAAAA,OAAO,EAAE;AAD2B,KAFvB;AAKf,yCAAqC;AACnCC,MAAAA,KAAK,EAAE,SAD4B;AAEnCC,MAAAA,aAAa,EAAE;AAFoB;AALtB,GAJU;AAc3BC,EAAAA,YAAY,EAAE;AACZC,IAAAA,WAAW,EAAE;AADD,GAda;AAiB3BC,EAAAA,QAAQ,EAAE;AACRC,IAAAA,QAAQ,EAAE,UADF;AAERR,IAAAA,SAAS,EAAE,OAFH;AAGRS,IAAAA,KAAK,EAAE,CAHC;AAIRC,IAAAA,MAAM,EAAE,EAJA;AAKRC,IAAAA,MAAM,EAAE;AALA,GAjBiB;AAwB3BC,EAAAA,UAAU,EAAE;AACVJ,IAAAA,QAAQ,EAAE,UADA;AAEVC,IAAAA,KAAK,EAAEI,KAAK,IAAIA,KAAK,CAACC,SAAN,GAAkB,CAAlB,GAAsB,MAF5B;AAGVJ,IAAAA,MAAM,EAAEG,KAAK,IAAIA,KAAK,CAACC,SAAN,GAAkB,EAAlB,GAAuB,GAH9B;AAIVH,IAAAA,MAAM,EAAE;AAJE,GAxBe;AA8B3BI,EAAAA,UAAU,EAAE;AACVP,IAAAA,QAAQ,EAAE,UADA;AAEVC,IAAAA,KAAK,EAAEI,KAAK,IAAIA,KAAK,CAACC,SAAN,GAAkB,CAAlB,GAAsB,MAF5B;AAGVJ,IAAAA,MAAM,EAAEG,KAAK,IAAIA,KAAK,CAACC,SAAN,GAAkB,EAAlB,GAAuB,GAH9B;AAIVH,IAAAA,MAAM,EAAE;AAJE,GA9Be;AAoC3BK,EAAAA,QAAQ,EAAE;AACRR,IAAAA,QAAQ,EAAE,UADF;AAERC,IAAAA,KAAK,EAAEI,KAAK,IAAIA,KAAK,CAACC,SAAN,GAAkB,CAAlB,GAAsB,MAF9B;AAGRJ,IAAAA,MAAM,EAAEG,KAAK,IAAIA,KAAK,CAACC,SAAN,GAAkB,EAAlB,GAAuB,MAHhC;AAIRG,IAAAA,KAAK,EAAE,OAJC;AAKRN,IAAAA,MAAM,EAAE,KALA;AAMRR,IAAAA,KAAK,EAAE,SANC,CAOR;;AAPQ,GApCiB;AA6C3Be,EAAAA,mBAAmB,EAAE;AACnBV,IAAAA,QAAQ,EAAE,UADS;AAEnBC,IAAAA,KAAK,EAAE,CAFY;AAGnBC,IAAAA,MAAM,EAAE,EAHW;AAInBO,IAAAA,KAAK,EAAE,OAJY;AAKnBN,IAAAA,MAAM,EAAE,KALW;AAMnBR,IAAAA,KAAK,EAAE;AANY,GA7CM;AAqD3BgB,EAAAA,SAAS,EAAE;AACTX,IAAAA,QAAQ,EAAE,OADD;AAETC,IAAAA,KAAK,EAAE,MAFE;AAGTC,IAAAA,MAAM,EAAE,EAHC;AAITC,IAAAA,MAAM,EAAE,KAJC;AAKTR,IAAAA,KAAK,EAAE,SALE;AAMTiB,IAAAA,QAAQ,EAAE;AAND,GArDgB;AA6D3BC,EAAAA,OAAO,EAAE;AACPC,IAAAA,MAAM,EAAE;AADD,GA7DkB;AAgE3BC,EAAAA,KAAK,EAAE;AACLC,IAAAA,MAAM,EAAE,MADH;AAELC,IAAAA,KAAK,EAAE;AAFF,GAhEoB;AAoE3BC,EAAAA,QAAQ,EAAE;AACRD,IAAAA,KAAK,EAAE,MADC;AAERD,IAAAA,MAAM,EAAE,MAFA;AAGR,4BAAwB;AACtBC,MAAAA,KAAK,EAAE,MADe;AAEtBD,MAAAA,MAAM,EAAE,MAFc;AAGtB,2BAAqB;AACnBd,QAAAA,MAAM,EAAE,CADW;AAEnBY,QAAAA,MAAM,EAAE;AAFW,OAHC;AAOtB,6BAAuB;AACrBG,QAAAA,KAAK,EAAE,MADc;AAErBE,QAAAA,MAAM,EAAE,mBAFa;AAGrBC,QAAAA,YAAY,EAAE,CAHO;AAIrBJ,QAAAA,MAAM,EAAE,mBAJa;AAKrB,uBAAe;AACbC,UAAAA,KAAK,EAAE,MADM;AAEbD,UAAAA,MAAM,EAAE;AAFK;AALM;AAPD,KAHhB;AAqBR,2BAAuB;AACrBC,MAAAA,KAAK,EAAE,MADc;AAErBD,MAAAA,MAAM,EAAE;AAFa;AArBf,GApEiB;AA8F3BK,EAAAA,SAAS,EAAE;AACTL,IAAAA,MAAM,EAAE,MADC;AAETM,IAAAA,cAAc,EAAE,OAFP;AAGTC,IAAAA,gBAAgB,EAAE,WAHT;AAITN,IAAAA,KAAK,EAAE,MAJE;AAKTO,IAAAA,OAAO,EAAE;AALA,GA9FgB;AAsG3BC,EAAAA,cAAc,EAAE;AACdN,IAAAA,MAAM,EAAE;AADM,GAtGW;AAyG3BO,EAAAA,WAAW,EAAE;AACX/B,IAAAA,KAAK,EAAE,SADI;AAEXiB,IAAAA,QAAQ,EAAE,EAFC;AAGXe,IAAAA,SAAS,EAAE,IAHA;AAIXnC,IAAAA,SAAS,EAAE;AAJA,GAzGc;AA+G3BoC,EAAAA,UAAU,EAAE;AACVjC,IAAAA,KAAK,EAAE,SADG;AAEViB,IAAAA,QAAQ,EAAE,EAFA;AAGVe,IAAAA,SAAS,EAAE,IAHD;AAIVnC,IAAAA,SAAS,EAAE;AAJD,GA/Ge;AAqH3BqC,EAAAA,kBAAkB,EAAE;AAClB7B,IAAAA,QAAQ,EAAE;AADQ,GArHO;AAwH3B8B,EAAAA,gBAAgB,EAAE;AAChBnC,IAAAA,KAAK,EAAE,SADS;AAEhBiB,IAAAA,QAAQ,EAAE,EAFM;AAGhBE,IAAAA,MAAM,EAAE,MAHQ;AAIhBtB,IAAAA,SAAS,EAAE;AAJK,GAxHS;AA8H3BuC,EAAAA,cAAc,EAAE;AACdP,IAAAA,OAAO,EAAE,MADK;AAEdR,IAAAA,MAAM,EAAE,MAFM;AAGdC,IAAAA,KAAK,EAAE;AAHO,GA9HW;AAoI3Be,EAAAA,YAAY,EAAE;AACZC,IAAAA,UAAU,EAAE,SADA;AAEZjB,IAAAA,MAAM,EAAE,GAFI;AAGZC,IAAAA,KAAK,EAAE,MAHK;AAIZE,IAAAA,MAAM,EAAE,mBAJI;AAKZC,IAAAA,YAAY,EAAE;AALF,GApIa;AA2I3Bc,EAAAA,IAAI,EAAE;AACJ,eAAW;AACTjB,MAAAA,KAAK,EAAEZ,KAAK,IAAIA,KAAK,CAACC,SAAN,GAAkB,MAAlB,GAA2B,EADlC;AAETU,MAAAA,MAAM,EAAEX,KAAK,IAAIA,KAAK,CAACC,SAAN,GAAkB,MAAlB,GAA2B;AAFnC;AADP;AA3IqB,CAAD,CAA5B;AAmJA,MAAM6B,eAAe,GAAG;AACtBF,EAAAA,UAAU,EAAE,wBADU;AAEtBhB,EAAAA,KAAK,EAAE,CAFe;AAGtBD,EAAAA,MAAM,EAAE,CAHc;AAItBQ,EAAAA,OAAO,EAAE,cAJa;AAKtBV,EAAAA,MAAM,EAAE;AALc,CAAxB;;AAQA,SAASsB,SAAT,CAAmBC,IAAnB,EAAyBC,EAAzB,EAA6B;AAC3B,MAAIC,MAAM,GAAG,IAAIC,UAAJ,EAAb;AACAD,EAAAA,MAAM,CAACE,aAAP,CAAqBJ,IAArB;;AACAE,EAAAA,MAAM,CAACG,MAAP,GAAgB,YAAY;AAC1BJ,IAAAA,EAAE,CAACC,MAAM,CAACI,MAAR,CAAF;AACD,GAFD;;AAGAJ,EAAAA,MAAM,CAACK,OAAP,GAAiB,UAAUC,KAAV,EAAiB;AAChCC,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBF,KAAvB;AACD,GAFD;AAGD;;AAED,MAAMG,YAAY,GAAG,CAACC,IAAD,EAAOC,SAAP,KAAqB;AACxC,MAAID,IAAI,CAACE,QAAL,CAAc,QAAd,CAAJ,EAA6B;AAC3B,WAAOD,SAAP;AACD;;AACD,SAAOxE,QAAP;AACD,CALD;;AAOA,eAAe,SAAS0E,aAAT,CAAuB/C,KAAvB,EAA8B;AAAA;;AAC3C,QAAM;AAAEC,IAAAA,SAAF;AAAa+C,IAAAA,QAAb;AAAuBC,IAAAA,QAAvB;AAAiCC,IAAAA,KAAjC;AAAwCC,IAAAA,UAAU,GAAG;AAArD,MAA+DnD,KAArE;AACA,QAAMoD,OAAO,GAAGnE,SAAS,CAACe,KAAD,CAAzB;AACA,QAAM,CAACqD,UAAD,EAAaC,aAAb,IAA8BnG,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAM,CAACoG,GAAD,EAAMC,MAAN,IAAgBrG,QAAQ,CAAC,IAAD,CAA9B;AACA,QAAM,CAACsG,UAAD,EAAaC,aAAb,IAA8BvG,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAM,CAACwG,UAAD,EAAaC,aAAb,IAA8BzG,QAAQ,CAAC,CAAD,CAA5C;AACA,QAAM,CAAC0G,eAAD,EAAkBC,kBAAlB,IAAwC3G,QAAQ,CAAC,KAAD,CAAtD;AACA,QAAM,CAAC4G,gBAAD,EAAmBC,mBAAnB,IAA0C7G,QAAQ,CAAC,IAAD,CAAxD;AACA,QAAM8G,SAAS,GAAG/G,MAAM,CAAC,IAAD,CAAxB;;AAEA,QAAMgH,qBAAqB,GAAG,MAAM;AAClC;AACAD,IAAAA,SAAS,CAACE,OAAV,CAAkBC,KAAlB;AACAd,IAAAA,aAAa,CAAC,KAAD,CAAb;AACD,GAJD;;AAKA,QAAMe,gBAAgB,GAAIC,KAAD,IAAW;AAClCA,IAAAA,KAAK,CAACC,eAAN;AACAD,IAAAA,KAAK,CAACE,cAAN;AACA,QAAI,CAACxC,IAAD,IAASsC,KAAK,CAACG,MAAN,CAAavB,KAA1B;AACAF,IAAAA,QAAQ,CAAChB,IAAD,CAAR;AACD,GALD;;AAOA,QAAM0C,MAAM,GAAG/G,OAAO,CAAC,MAAM;AAC3B,WAAOuF,KAAK,CAACyB,MAAN,CAAa3C,IAAI,IAAI;AAAA;;AAC1B,aAAO,CAAAA,IAAI,SAAJ,IAAAA,IAAI,WAAJ,kCAAAA,IAAI,CAAE4C,YAAN,0EAAoBC,OAApB,CAA4B,MAA5B,OAAwC,CAAC,CAAzC,IAA8C7C,IAAI,CAAC4C,YAAL,CAAkBC,OAAlB,CAA0B,OAA1B,MAAuC,CAAC,CAA7F;AACD,KAFM,CAAP;AAGD,GAJqB,EAInB,CAAC3B,KAAD,CAJmB,CAAtB;;AAMA,QAAM4B,gBAAgB,GAAG,MAAM;AAC7B,QAAI7E,SAAJ,EAAe;AACb,0BAAQ,QAAC,eAAD;AAAA;AAAA;AAAA;AAAA,cAAR;AACD;;AACD,wBAAQ,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,YAAR;AACD,GALD;;AAMA,QAAM8E,kBAAkB,GAAG,MAAM;AAC/B,QAAI9E,SAAJ,EAAe;AACb,0BAAQ,QAAC,eAAD;AAAA;AAAA;AAAA;AAAA,cAAR;AACD;;AACD,wBAAQ,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,YAAR;AACD,GALD;;AAOA,QAAM+E,WAAW,GAAG,MAAM;AACxB,wBACE;AAAK,MAAA,SAAS,EAAEzH,IAAI,CAAC;AAAE,SAAC6F,OAAO,CAAC5B,kBAAT,GAA8BvB;AAAhC,OAAD,CAApB;AAAA,iBACGoD,UAAU,gBACT;AAAA,gCACE;AAAK,UAAA,SAAS,EAAED,OAAO,CAACrD,UAAxB;AAAA,iCACE,QAAC,UAAD;AACE,YAAA,OAAO,EAAEmE,qBADX;AAEE,YAAA,SAAS,EAAEd,OAAO,CAACvB,IAFrB;AAAA,sBAIG5B,SAAS,gBAAG,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,oBAAH,gBAAoB,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAJhC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eASE;AAAK,UAAA,SAAS,EAAEmD,OAAO,CAAClD,UAAxB;AAAA,iCACE,QAAC,UAAD;AACE,YAAA,OAAO,EAAE,MAAM;AAAE4D,cAAAA,kBAAkB,CAAC,IAAD,CAAlB;AAA0B,aAD7C;AAEE,YAAA,SAAS,EAAEV,OAAO,CAACvB,IAFrB;AAAA,sBAGG5B,SAAS,gBAAG,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,oBAAH,gBAAoB,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAHhC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBATF;AAAA,sBADS,GAkBP,IAnBN,eAoBE,QAAC,UAAD;AACE,QAAA,SAAS,EAAE1C,IAAI,CAAC6F,OAAO,CAACvB,IAAT,EAAeuB,OAAO,CAACjD,QAAvB,CADjB;AACmD,QAAA,OAAO,EAAE,MAAM;AAAEmD,UAAAA,aAAa,CAAC,CAACD,UAAF,CAAb;AAA4B,SADhG;AAAA,kBAEGA,UAAU,GAAG0B,kBAAkB,EAArB,GAA0BD,gBAAgB;AAFvD;AAAA;AAAA;AAAA;AAAA,cApBF,EAwBG,CAACzB,UAAD,IAAepD,SAAf,IAA4BiD,KAAK,CAAC+B,MAAlC,gBACC;AAAA,gCACE;AAAK,UAAA,SAAS,EAAE7B,OAAO,CAAC1D,QAAxB;AAAA,iCACE,QAAC,UAAD;AACE,YAAA,OAAO,EAAEwE,qBADX;AAEE,YAAA,SAAS,EAAEd,OAAO,CAACvB,IAFrB;AAAA,mCAIE,QAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAJF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eASE;AAAK,UAAA,SAAS,EAAEuB,OAAO,CAAC/C,mBAAxB;AAAA,iCACE,QAAC,UAAD;AACE,YAAA,OAAO,EAAE6E,iBADX;AAEE,YAAA,SAAS,EAAE9B,OAAO,CAACvB,IAFrB;AAAA,mCAIE,QAAC,oBAAD;AAAA;AAAA;AAAA;AAAA;AAJF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBATF;AAAA,sBADD,GAmBG,IA3CN;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AA+CD,GAhDD;;AAkDA,QAAMsD,gBAAgB,GAAIC,OAAD,IAAa;AACpC,UAAMC,QAAQ,GAAG,IAAIC,IAAJ,GAAWC,OAAX,KAAuB,MAAxC;AACAC,IAAAA,KAAK,CAACJ,OAAD,CAAL,CAAeK,IAAf,CAAoBC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAA3B,EACGF,IADH,CACQE,IAAI,IAAI;AACZ,YAAM3D,IAAI,GAAG,IAAI4D,IAAJ,CAAS,CAACD,IAAD,CAAT,EAAiBN,QAAjB,EAA2B;AAAEzC,QAAAA,IAAI,EAAE;AAAR,OAA3B,CAAb;AACAI,MAAAA,QAAQ,CAAChB,IAAD,EAAOoD,OAAP,CAAR;AACD,KAJH;AAKAS,IAAAA,qBAAqB;AACtB,GARD;;AAUA,QAAMA,qBAAqB,GAAG,MAAM;AAClC/B,IAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACAR,IAAAA,aAAa,CAAC,KAAD,CAAb;AACD,GAHD;;AAIA,QAAMwC,WAAW,GAAGjI,WAAW,CAAC,CAACmE,IAAD,EAAO+D,KAAP,KAAiB;AAC/C,QAAI/D,IAAI,CAAC4C,YAAL,CAAkBC,OAAlB,CAA0B,MAA1B,MAAsC,CAAC,CAAvC,IAA4C7C,IAAI,CAAC4C,YAAL,CAAkBC,OAAlB,CAA0B,OAA1B,MAAuC,CAAC,CAAxF,EAA2F;AACzFjB,MAAAA,aAAa,CAACmC,KAAD,CAAb;AACArC,MAAAA,aAAa,CAAC,IAAD,CAAb;AACA;AACD,KAJD,MAKK,IAAI1B,IAAI,CAAC4C,YAAL,CAAkBC,OAAlB,CAA0B,MAA1B,MAAsC,CAAC,CAA3C,EAA8C;AACjDrB,MAAAA,MAAM,CAACxB,IAAD,CAAN;AACD;AACF,GAT8B,EAS5B,EAT4B,CAA/B;AAUA,QAAMgE,0BAA0B,GAAGnI,WAAW,CAAEoI,UAAD,IAAgB;AAC7D,QAAIA,UAAU,GAAG,CAAb,KAAmBlC,gBAAvB,EACEC,mBAAmB,CAACiC,UAAU,GAAG,CAAd,CAAnB;AACH,GAH6C,EAG3C,CAAClC,gBAAD,CAH2C,CAA9C;AAKA,QAAMmB,iBAAiB,GAAGrH,WAAW,CAAC,MAAM;AAC1C,QAAIqF,KAAK,CAAC+B,MAAV,EAAkB;AAChBhC,MAAAA,QAAQ,CAACC,KAAK,CAACa,gBAAD,CAAL,CAAwBmC,kBAAzB,CAAR;AACD;AACF,GAJoC,EAIlC,CAACnC,gBAAD,EAAmBb,KAAnB,EAA0BD,QAA1B,CAJkC,CAArC;;AAKA,QAAMkD,eAAe,GAAG,MAAM;AAC5B,wBACE;AAAK,MAAA,SAAS,EAAE/C,OAAO,CAAC1B,cAAxB;AAAA,8BACE,QAAC,QAAD;AAAU,QAAA,SAAS,EAAE0B,OAAO,CAACvC,QAA7B;AACE,QAAA,eAAe,EAAEmF,0BADnB;AAEE,QAAA,UAAU,EAAE,KAFd;AAGE,QAAA,eAAe,EAAE,CAACI,cAAD,EAAiBC,UAAjB,EAA6BN,KAA7B,EAAoCO,KAApC,KAA8C;AAC7D,cAAID,UAAJ,EAAgB;AACd,gCACE;AACE,cAAA,KAAK,EAAE,EAAE,GAAGvE,eAAL;AAAsBF,gBAAAA,UAAU,EAAE;AAAlC,eADT;AAEE,4BAAa,aAAY0E,KAAM,IAAGP,KAAK,GAAG,CAAE,EAF9C;AAGE,cAAA,KAAK,EAAG,aAAYO,KAAM,IAAGP,KAAK,GAAG,CAAE;AAHzC;AAAA;AAAA;AAAA;AAAA,oBADF;AAOD;;AACD,8BACE;AACE,YAAA,KAAK,EAAEjE,eADT;AAEE,YAAA,OAAO,EAAEsE,cAFX;AAGE,YAAA,SAAS,EAAEA,cAHb;AAIE,YAAA,KAAK,EAAEL,KAJT;AAME,YAAA,IAAI,EAAC,QANP;AAOE,YAAA,QAAQ,EAAE,CAPZ;AAQE,YAAA,KAAK,EAAG,GAAEO,KAAM,IAAGP,KAAK,GAAG,CAAE,EAR/B;AASE,0BAAa,GAAEO,KAAM,IAAGP,KAAK,GAAG,CAAE;AATpC,aAKOA,KALP;AAAA;AAAA;AAAA;AAAA,kBADF;AAaD,SA1BH;AAAA,kBA2BG7C,KAAK,CAACqD,GAAN,CAAU,CAACC,CAAD,EAAIT,KAAJ,kBACT;AAEE,UAAA,SAAS,EAAE3C,OAAO,CAAC1C,KAFrB;AAGE,UAAA,OAAO,EAAE,MAAMoF,WAAW,CAACU,CAAD,EAAIT,KAAJ,CAH5B;AAAA,iCAKE,QAAC,iBAAD;AACE,YAAA,SAAS,EAAE3C,OAAO,CAACpC,SADrB;AAEE,YAAA,KAAK,EAAEwF;AAFT;AAAA;AAAA;AAAA;AAAA;AALF,WACQ,GAAEA,CAAC,CAACC,IAAK,IAAGD,CAAC,CAAC5D,IAAK,EAD3B;AAAA;AAAA;AAAA;AAAA,gBADD;AA3BH;AAAA;AAAA;AAAA;AAAA,cADF,EAyCG,CAACM,KAAK,CAAC+B,MAAP,gBACC;AAAM,QAAA,SAAS,EAAE7B,OAAO,CAAC3B,gBAAzB;AAAA,gCACE,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAG,UAAA,SAAS,EAAE2B,OAAO,CAAC/B,WAAtB;AAAA,oBAAqC,iBAAgB8B,UAAU,GAAG,EAAH,GAAQ,gBAAiB;AAAxF;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cADD,GAKG,IA9CN;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAqDD,GAtDD;;AAuDA,QAAMuD,cAAc,GAAG,MAAM;AAC3B,wBACE;AAAA,8BACE;AACE,QAAA,SAAS,EAAErJ,UAAU,CACnB+F,OAAO,CAAChE,eADW,EAEnBgE,OAAO,CAAC5D,YAFW,CADvB;AAAA,+BAME,QAAC,IAAD;AAAM,UAAA,SAAS,MAAf;AAAgB,UAAA,OAAO,EAAE,CAAzB;AAAA,oBACG0D,KAAK,CAACqD,GAAN,CAAU,CAACC,CAAD,EAAIG,GAAJ,kBACT,QAAC,IAAD;AAAM,YAAA,IAAI,MAAV;AAAW,YAAA,EAAE,EAAE,CAAf;AAAkB,YAAA,OAAO,EAAE,MAAMb,WAAW,CAACU,CAAD,EAAIG,GAAJ,CAA5C;AAAA,mCACE,QAAC,iBAAD,OAAuBH;AAAvB;AAAA;AAAA;AAAA;AAAA;AADF,aAA4D,GAAEA,CAAC,CAACN,kBAAmB,EAAnF;AAAA;AAAA;AAAA;AAAA,kBADD;AADH;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,cADF,eAgBE;AAAA,kBACG,CAAChD,KAAK,CAAC+B,MAAP,gBACC;AAAK,UAAA,SAAS,EAAE7B,OAAO,CAAC7B,UAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADD,GAEG;AAHN;AAAA;AAAA;AAAA;AAAA,cAhBF;AAAA,oBADF;AAwBD,GAzBD;;AA0BA,sBACE;AAAA,4BACE;AAAK,MAAA,SAAS,EAAEhE,IAAI,CAAC;AACnB,SAAC6F,OAAO,CAACzB,YAAT,GAAwB1B,SADL;AAEnB,SAACmD,OAAO,CAAChC,cAAT,GAA0B8B,KAAK,CAAC+B;AAFb,OAAD,CAApB;AAAA,iBAIGhF,SAAS,GAAGkG,eAAe,EAAlB,GAAuBO,cAAc,EAJjD,eAME;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,EAAE,EAAC,uBAFL,CAGE;AACA;AACA;AALF;AAME,QAAA,MAAM,EAAC,wCANT;AAQE,QAAA,GAAG,EAAEzC,SARP;AASE,QAAA,KAAK,EAAE;AAAE9C,UAAAA,OAAO,EAAE;AAAX,SATT;AAUE,QAAA,OAAO,EAAGmD,KAAD,IAAW;AAClBA,UAAAA,KAAK,CAACG,MAAN,CAAamC,KAAb,GAAqB,IAArB;AACD,SAZH;AAaE,QAAA,OAAO,EAAEvC;AAbX;AAAA;AAAA;AAAA;AAAA,cANF,EAqBG,CAAClB,UAAD,GAAc6B,WAAW,EAAzB,GAA8B,IArBjC;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,EA2BGnB,eAAe,iBACd,QAAC,gBAAD;AACE,MAAA,UAAU,EAAC,YADb;AAEE,MAAA,IAAI,MAFN;AAGE,MAAA,YAAY,eACV,QAAC,YAAD;AACE,QAAA,YAAY,EAAEsB;AADhB;AAAA;AAAA;AAAA;AAAA,cAJJ;AAQE,MAAA,OAAO,EAAEU;AARX;AAAA;AAAA;AAAA;AAAA,YA5BJ,EAuCGpC,UAAU,iBACT,QAAC,YAAD;AACE,MAAA,WAAW,EAAEiB,MAAM,CAACf,UAAD,CADrB;AAEE,MAAA,QAAQ,EAAEe,MAAM,CAAC,CAACf,UAAU,GAAG,CAAd,IAAmBe,MAAM,CAACO,MAA3B,CAFlB;AAGE,MAAA,QAAQ,EAAEP,MAAM,CAAC,CAACf,UAAU,GAAGe,MAAM,CAACO,MAApB,GAA6B,CAA9B,IAAmCP,MAAM,CAACO,MAA3C,CAHlB;AAIE,MAAA,cAAc,EAAE,MAAMvB,aAAa,CAAC,KAAD,CAJrC;AAKE,MAAA,iBAAiB,EAAE,MAAM;AACvBE,QAAAA,aAAa,CAAC,CAACD,UAAU,GAAGe,MAAM,CAACO,MAApB,GAA6B,CAA9B,IAAmCP,MAAM,CAACO,MAA3C,CAAb;AACD,OAPH;AAQE,MAAA,iBAAiB,EAAE,MAAM;AACvBrB,QAAAA,aAAa,CAAC,CAACD,UAAU,GAAG,CAAd,IAAmBe,MAAM,CAACO,MAA3B,CAAb;AACD;AAVH;AAAA;AAAA;AAAA;AAAA,YAxCJ,EAsDG1B,GAAG,iBACF,QAAC,gBAAD;AACE,MAAA,UAAU,EAAEA,GAAG,CAACkD,IADlB;AAEE,MAAA,IAAI,MAFN;AAGE,MAAA,YAAY,eACV,QAAC,QAAD;AAAU,QAAA,IAAI,EAAElD,GAAG,CAACsD,UAApB;AAAA,+BACE,QAAC,IAAD;AAAM,UAAA,UAAU,EAAE;AAAlB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAJJ;AAQE,MAAA,OAAO,EAAE,MAAM;AAAErD,QAAAA,MAAM,CAACsD,SAAD,CAAN;AAAmB;AARtC;AAAA;AAAA;AAAA;AAAA,YAvDJ;AAAA,kBADF;AAqED;;GApRuB/D,a;UAEN9D,S;;;KAFM8D,a;AAuRxB,MAAMgE,QAAQ,GAAG,EAAjB;AACA,OAAO,SAASC,iBAAT,CAA2B;AAAEC,EAAAA,SAAF;AAAaL,EAAAA,KAAK,GAAGG;AAArB,CAA3B,EAA4D;AAAA;;AACjE,QAAM3D,OAAO,GAAGnE,SAAS,EAAzB;AACA,QAAM;AAAEiH,IAAAA,kBAAF;AAAsBtB,IAAAA,YAAtB;AAAoCsC,IAAAA;AAApC,MAAqDN,KAA3D;AACA,QAAMO,QAAQ,GAAGzI,WAAW,EAA5B;AACA,QAAM0I,MAAM,GAAGzI,WAAW,CAAC0I,KAAK,IAAI;AAClC,WAAOzI,SAAS,CAAC0I,MAAV,CAAiBD,KAAjB,EAAwB;AAC7BE,MAAAA,MAAM,EAAErB,kBADqB;AAE7BgB,MAAAA,YAAY,EAAEA;AAFe,KAAxB,CAAP;AAID,GALyB,CAA1B;AAOA,QAAMM,SAAS,GAAG7J,OAAO,CAAC,MAAM;AAC9B,QAAI,CAAAiH,YAAY,SAAZ,IAAAA,YAAY,WAAZ,YAAAA,YAAY,CAAEC,OAAd,CAAsB,MAAtB,OAAkC,CAAC,CAAnC,IAAwCD,YAAY,CAACC,OAAb,CAAqB,OAArB,MAAkC,CAAC,CAA/E,EAAkF;AAChF,UAAIuC,MAAJ,aAAIA,MAAJ,uBAAIA,MAAM,CAAEK,OAAZ,EAAqB;AACnB,YAAIC,MAAM,GAAG,EAAb;AACA,YAAIC,KAAK,GAAG,IAAIC,UAAJ,CAAeR,MAAM,CAACK,OAAtB,CAAZ;AACA,YAAII,GAAG,GAAGF,KAAK,CAACG,UAAhB;;AACA,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,GAApB,EAAyBE,CAAC,EAA1B,EAA8B;AAC5BL,UAAAA,MAAM,IAAIM,MAAM,CAACC,YAAP,CAAoBN,KAAK,CAACI,CAAD,CAAzB,CAAV;AACD;;AACD,YAAIG,WAAW,GAAG,4BAA4BC,MAAM,CAACC,IAAP,CAAYV,MAAZ,CAA9C;AACA,eAAOQ,WAAP;AACD;AACF,KAXD,MAYK;AACH,aAAO7J,QAAP;AACD;AACF,GAhBwB,EAgBtB,CAACuG,YAAD,EAAewC,MAAM,CAACK,OAAtB,CAhBsB,CAAzB;AAkBAxK,EAAAA,SAAS,CAAC,MAAM;AACd,QAAImK,MAAM,IAAI,EAAE,YAAYA,MAAd,CAAd,EAAqC;AACnCD,MAAAA,QAAQ,CAACtI,OAAO,CAACyI,MAAR,CAAee,OAAf,CAAuB;AAAEd,QAAAA,MAAM,EAAErB,kBAAV;AAA8BgB,QAAAA;AAA9B,OAAvB,CAAD,CAAR;AACD;AACF,GAJQ,EAIN,CAACC,QAAD,EAAWjB,kBAAX,EAA+BkB,MAA/B,EAAuCF,YAAvC,CAJM,CAAT;AAMA,sBACE;AAAK,IAAA,SAAS,EAAED,SAAhB;AAA2B,IAAA,KAAK,EAAE;AAAEqB,MAAAA,eAAe,EAAG,OAAMd,SAAU;AAApC,KAAlC;AAAA,cACG,CAAAJ,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM,CAAEmB,MAAR,MAAmB,WAAnB,gBACC,QAAC,OAAD;AAAS,MAAA,IAAI,EAAC,MAAd;AAAqB,MAAA,KAAK,EAAE,GAA5B;AAAiC,MAAA,SAAS,EAAEnF,OAAO,CAAC5C,OAApD;AAA6D,MAAA,IAAI,EAAE;AAAnE;AAAA;AAAA;AAAA;AAAA,YADD,GAEG;AAHN;AAAA;AAAA;AAAA;AAAA,UADF;AAOD;;IA1CewG,iB;UACE/H,S,EAECP,W,EACFC,W;;;MAJDqI,iB;;AA4ChB,SAASwB,YAAT,CAAsB;AAAEC,EAAAA,WAAF;AAAeC,EAAAA,QAAf;AAAyBC,EAAAA,QAAzB;AAAmC,KAAGC;AAAtC,CAAtB,EAAsE;AAAA;;AACpE,QAAMC,UAAU,GAAGlK,WAAW,CAAC0I,KAAK,IAAI;AACtC,WAAOzI,SAAS,CAAC0I,MAAV,CAAiBD,KAAjB,EAAwB;AAC7BE,MAAAA,MAAM,EAAEkB,WAAW,CAACvC,kBADS;AAE7BgB,MAAAA,YAAY,EAAEuB,WAAW,CAACvB;AAFG,KAAxB,CAAP;AAID,GAL6B,CAA9B;AAMA,QAAM4B,UAAU,GAAGnK,WAAW,CAAC0I,KAAK,IAAI;AACtC,WAAOzI,SAAS,CAAC0I,MAAV,CAAiBD,KAAjB,EAAwB;AAC7BE,MAAAA,MAAM,EAAEmB,QAAQ,CAACxC,kBADY;AAE7BgB,MAAAA,YAAY,EAAEwB,QAAQ,CAACxB;AAFM,KAAxB,CAAP;AAID,GAL6B,CAA9B;AAMA,QAAM6B,UAAU,GAAGpK,WAAW,CAAC0I,KAAK,IAAI;AACtC,WAAOzI,SAAS,CAAC0I,MAAV,CAAiBD,KAAjB,EAAwB;AAC7BE,MAAAA,MAAM,EAAEoB,QAAQ,CAACzC,kBADY;AAE7BgB,MAAAA,YAAY,EAAEyB,QAAQ,CAACzB;AAFM,KAAxB,CAAP;AAID,GAL6B,CAA9B;AAOA,QAAM8B,aAAa,GAAGrL,OAAO,CAAC,MAAM;AAClC,QAAIkL,UAAJ,aAAIA,UAAJ,uBAAIA,UAAU,CAAEpB,OAAhB,EAAyB;AACvB,UAAIC,MAAM,GAAG,EAAb;AACA,UAAIC,KAAK,GAAG,IAAIC,UAAJ,CAAeiB,UAAU,CAACpB,OAA1B,CAAZ;AACA,UAAII,GAAG,GAAGF,KAAK,CAACG,UAAhB;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,GAApB,EAAyBE,CAAC,EAA1B,EAA8B;AAC5BL,QAAAA,MAAM,IAAIM,MAAM,CAACC,YAAP,CAAoBN,KAAK,CAACI,CAAD,CAAzB,CAAV;AACD;;AACD,UAAIG,WAAW,GAAG,4BAA4BC,MAAM,CAACC,IAAP,CAAYV,MAAZ,CAA9C;AACA,aAAOQ,WAAP;AACD;AACF,GAX4B,EAW1B,CAACW,UAAU,CAACpB,OAAZ,CAX0B,CAA7B;AAaA,QAAMwB,aAAa,GAAGtL,OAAO,CAAC,MAAM;AAClC,QAAImL,UAAJ,aAAIA,UAAJ,uBAAIA,UAAU,CAAErB,OAAhB,EAAyB;AACvB,UAAIC,MAAM,GAAG,EAAb;AACA,UAAIC,KAAK,GAAG,IAAIC,UAAJ,CAAekB,UAAU,CAACrB,OAA1B,CAAZ;AACA,UAAII,GAAG,GAAGF,KAAK,CAACG,UAAhB;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,GAApB,EAAyBE,CAAC,EAA1B,EAA8B;AAC5BL,QAAAA,MAAM,IAAIM,MAAM,CAACC,YAAP,CAAoBN,KAAK,CAACI,CAAD,CAAzB,CAAV;AACD;;AACD,UAAIG,WAAW,GAAG,4BAA4BC,MAAM,CAACC,IAAP,CAAYV,MAAZ,CAA9C;AACA,aAAOQ,WAAP;AACD;AACF,GAX4B,EAW1B,CAACY,UAAU,CAACrB,OAAZ,CAX0B,CAA7B;AAaA,QAAMyB,aAAa,GAAGvL,OAAO,CAAC,MAAM;AAClC,QAAIoL,UAAJ,aAAIA,UAAJ,uBAAIA,UAAU,CAAEtB,OAAhB,EAAyB;AACvB,UAAIC,MAAM,GAAG,EAAb;AACA,UAAIC,KAAK,GAAG,IAAIC,UAAJ,CAAemB,UAAU,CAACtB,OAA1B,CAAZ;AACA,UAAII,GAAG,GAAGF,KAAK,CAACG,UAAhB;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,GAApB,EAAyBE,CAAC,EAA1B,EAA8B;AAC5BL,QAAAA,MAAM,IAAIM,MAAM,CAACC,YAAP,CAAoBN,KAAK,CAACI,CAAD,CAAzB,CAAV;AACD;;AACD,UAAIG,WAAW,GAAG,4BAA4BC,MAAM,CAACC,IAAP,CAAYV,MAAZ,CAA9C;AACA,aAAOQ,WAAP;AACD;AACF,GAX4B,EAW1B,CAACa,UAAU,CAACtB,OAAZ,CAX0B,CAA7B;AAaA,sBACE,QAAC,QAAD;AACE,IAAA,OAAO,EAAEuB,aADX;AAEE,IAAA,OAAO,EAAEC,aAFX;AAGE,IAAA,OAAO,EAAEC,aAHX;AAAA,OAIMN;AAJN;AAAA;AAAA;AAAA;AAAA,UADF;AAQD;;IAnEQJ,Y;UACY7J,W,EAMAA,W,EAMAA,W;;;MAbZ6J,Y","sourcesContent":["import { makeStyles } from \"@material-ui/styles\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport DocumentThumbnail from \"../DocumentThumbnail\";\nimport classnames from \"classnames\";\nimport Grid from \"@material-ui/core/Grid\";\nimport clsx from 'clsx';\nimport CameraIcon from \"../../assets/Icons/CameraIcon\";\nimport CapturePhoto from \"../CapturePhoto\";\nimport FullScreenDialog from \"../FullScreenDialog\";\nimport { useMemo } from \"react\";\nimport Lightbox from 'react-image-lightbox';\nimport 'react-image-lightbox/style.css'; // This only needs to be imported once in your app\nimport { useCallback } from \"react\";\nimport { Document, Page, pdfjs } from 'react-pdf';\nimport NoImageIcon from \"../../assets/Icons/NoImageIcon\";\nimport ExpandWhiteIcon from \"../../assets/Icons/ExpandWhiteIcon\";\nimport ExpandIcon from \"../../assets/Icons/ExpandIcon\";\nimport EditImageIcon from \"../../assets/Icons/EditImageIcon\";\nimport PDFImage from \"../../assets/img/pdf.png\"\nimport DeleteAttachmentIcon from \"../../assets/Icons/DeleteAttachmentIcon\";\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\"; // requires a loader\nimport { Carousel } from 'react-responsive-carousel';\nimport AttachIcon from \"../../assets/Icons/AttachIcon\";\nimport IconButton from \"../IconButton\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectors } from \"../../reducers\";\nimport actions from \"../../actions\";\nimport Spinner from \"../Spinner\";\n\npdfjs.GlobalWorkerOptions.workerSrc = '/pdf.worker.min.js';\n\n\nconst useStyles = makeStyles({\n  paper: {\n    textAlign: \"center\",\n  },\n  fieldsetWrapper: {\n    padding: \"12px 12px 3px 12px\",\n    \"& .x-button.x-has-text .x-inner-el\": {\n      padding: \"3px 12px\",\n    },\n    \"& .x-button.x-has-text .x-text-el\": {\n      color: \"#ffffff\",\n      textTransform: \"capitalize\",\n    },\n  },\n  extraSpacing: {\n    paddingLeft: \"20px\",\n  },\n  editIcon: {\n    position: \"absolute\",\n    textAlign: 'right',\n    right: 4,\n    bottom: 90,\n    zIndex: \"999\",\n  },\n  attachIcon: {\n    position: \"absolute\",\n    right: props => props.slideView ? 4 : \"30px\",\n    bottom: props => props.slideView ? 90 : 180,\n    zIndex: \"999\",\n  },\n  cameraIcon: {\n    position: \"absolute\",\n    right: props => props.slideView ? 4 : \"30px\",\n    bottom: props => props.slideView ? 50 : 120,\n    zIndex: \"999\",\n  },\n  plusIcon: {\n    position: \"absolute\",\n    right: props => props.slideView ? 4 : \"30px\",\n    bottom: props => props.slideView ? 10 : \"50px\",\n    float: 'right',\n    zIndex: \"999\",\n    color: \"#0073E6\",\n    // fontSize: \"60px\",\n  },\n  deleteFileSlideIcon: {\n    position: \"absolute\",\n    right: 4,\n    bottom: 50,\n    float: 'right',\n    zIndex: \"999\",\n    color: \"#0073E6\",\n  },\n  crossIcon: {\n    position: \"fixed\",\n    right: \"30px\",\n    bottom: 90,\n    zIndex: \"999\",\n    color: \"#5C677D\",\n    fontSize: \"60px\",\n  },\n  spinner: {\n    margin: 'auto',\n  },\n  slide: {\n    height: '100%',\n    width: '100%',\n  },\n  carousel: {\n    width: '100%',\n    height: '100%',\n    '& > .carousel-slider': {\n      width: '100%',\n      height: '100%',\n      '& > .control-dots': {\n        bottom: 0,\n        margin: 0,\n      },\n      '& > .slider-wrapper': {\n        width: '100%',\n        border: '1px solid #E9EBEF',\n        borderRadius: 5,\n        height: 'calc(100% - 16px)',\n        '& > .slider': {\n          width: '100%',\n          height: '100%',\n        }\n      }\n    },\n    '& > .slider-wrapper': {\n      width: '100%',\n      height: '100%',\n    }\n  },\n  imgSlider: {\n    height: '100%',\n    backgroundSize: 'cover',\n    backgroundRepeat: 'no-repeat',\n    width: '100%',\n    display: 'flex'\n\n  },\n  withAttachment: {\n    border: '0px !important'\n  },\n  noImageText: {\n    color: '#5e5e5e',\n    fontSize: 13,\n    marginTop: '5%',\n    textAlign: 'center'\n  },\n  noFileText: {\n    color: '#5e5e5e',\n    fontSize: 13,\n    marginTop: '5%',\n    textAlign: 'center'\n  },\n  fabWrapperRelative: {\n    position: 'relative',\n  },\n  noFileTextSlider: {\n    color: '#5e5e5e',\n    fontSize: 13,\n    margin: 'auto',\n    textAlign: 'center'\n  },\n  slideContainer: {\n    display: 'flex',\n    height: '100%',\n    width: '100%',\n\n  },\n  slideWrapper: {\n    background: '#FFFFFF',\n    height: 184,\n    width: '100%',\n    border: '1px solid #E9EBEF',\n    borderRadius: 5,\n  },\n  icon: {\n    '& > svg': {\n      width: props => props.slideView ? '45px' : \"\",\n      height: props => props.slideView ? '45px' : \"\",\n    }\n  }\n});\n\nconst indicatorStyles = {\n  background: 'rgba(4, 102, 200, 0.2)',\n  width: 8,\n  height: 8,\n  display: 'inline-block',\n  margin: '0 8px',\n};\n\nfunction getBase64(file, cb) {\n  let reader = new FileReader();\n  reader.readAsDataURL(file);\n  reader.onload = function () {\n    cb(reader.result)\n  };\n  reader.onerror = function (error) {\n    console.log('Error: ', error);\n  };\n}\n\nconst imgThumbnail = (type, base64Img) => {\n  if (type.includes('image/')) {\n    return base64Img;\n  }\n  return PDFImage;\n}\n\nexport default function AttachmentsV2(props) {\n  const { slideView, onUpload, onDelete, files, isReadOnly = false } = props;\n  const classes = useStyles(props);\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [pdf, setPDF] = useState(null);\n  const [showImages, setShowImages] = useState(false);\n  const [photoIndex, setPhotoIndex] = useState(0);\n  const [shouldTakePhoto, setShouldTakePhoto] = useState(false);\n  const [activeAttachment, setActiveAttachment] = useState(null);\n  const inputFile = useRef(null)\n\n  const handleAttachFileClick = () => {\n    // `current` points to the mounted file input element\n    inputFile.current.click();\n    setIsExpanded(false);\n  }\n  const handleFileUpload = (event) => {\n    event.stopPropagation();\n    event.preventDefault();\n    var [file] = event.target.files;\n    onUpload(file);\n  }\n\n  const images = useMemo(() => {\n    return files.filter(file => {\n      return file?.filesMainRef?.indexOf('.png') !== -1 || file.filesMainRef.indexOf('.jpeg') !== -1;\n    })\n  }, [files])\n\n  const renderExpandIcon = () => {\n    if (slideView) {\n      return (<ExpandWhiteIcon />)\n    }\n    return (<ExpandIcon />)\n  }\n  const renderCollapseIcon = () => {\n    if (slideView) {\n      return (<ExpandWhiteIcon />)\n    }\n    return (<ExpandIcon />)\n  }\n\n  const renderIcons = () => {\n    return (\n      <div className={clsx({ [classes.fabWrapperRelative]: slideView })}>\n        {isExpanded ? (\n          <>\n            <div className={classes.attachIcon}>\n              <IconButton\n                onClick={handleAttachFileClick}\n                className={classes.icon}\n              >\n                {slideView ? <AttachIcon /> : <AttachIcon />}\n              </IconButton>\n            </div>\n            <div className={classes.cameraIcon}>\n              <IconButton\n                onClick={() => { setShouldTakePhoto(true) }}\n                className={classes.icon}>\n                {slideView ? <CameraIcon /> : <CameraIcon />}\n              </IconButton>\n            </div>\n          </>\n        ) : null}\n        <IconButton\n          className={clsx(classes.icon, classes.plusIcon)} onClick={() => { setIsExpanded(!isExpanded) }}>\n          {isExpanded ? renderCollapseIcon() : renderExpandIcon()}\n        </IconButton>\n        {!isExpanded && slideView && files.length ? (\n          <>\n            <div className={classes.editIcon}>\n              <IconButton\n                onClick={handleAttachFileClick}\n                className={classes.icon}\n              >\n                <EditImageIcon />\n              </IconButton>\n            </div>\n            <div className={classes.deleteFileSlideIcon}>\n              <IconButton\n                onClick={handleDeleteClick}\n                className={classes.icon}\n              >\n                <DeleteAttachmentIcon />\n              </IconButton>\n            </div>\n          </>\n        ) : null}\n      </div>\n    );\n  }\n\n  const handlePhotoClick = (dataUri) => {\n    const fileName = new Date().getTime() + '.png';\n    fetch(dataUri).then(res => res.blob())\n      .then(blob => {\n        const file = new File([blob], fileName, { type: \"image/png\" })\n        onUpload(file, dataUri)\n      })\n    handlePhotoClickClose();\n  }\n\n  const handlePhotoClickClose = () => {\n    setShouldTakePhoto(false);\n    setIsExpanded(false);\n  }\n  const handleClick = useCallback((file, index) => {\n    if (file.filesMainRef.indexOf('.png') !== -1 || file.filesMainRef.indexOf('.jpeg') !== -1) {\n      setPhotoIndex(index);\n      setShowImages(true);\n      return;\n    }\n    else if (file.filesMainRef.indexOf('.pdf') !== -1) {\n      setPDF(file)\n    }\n  }, [])\n  const handleCorouselStatusChange = useCallback((activeItem) => {\n    if (activeItem - 1 !== activeAttachment)\n      setActiveAttachment(activeItem - 1);\n  }, [activeAttachment])\n\n  const handleDeleteClick = useCallback(() => {\n    if (files.length) {\n      onDelete(files[activeAttachment].filesIndividualRef);\n    }\n  }, [activeAttachment, files, onDelete])\n  const renderSlideView = () => {\n    return (\n      <div className={classes.slideContainer}>\n        <Carousel className={classes.carousel}\n          statusFormatter={handleCorouselStatusChange}\n          showThumbs={false}\n          renderIndicator={(onClickHandler, isSelected, index, label) => {\n            if (isSelected) {\n              return (\n                <li\n                  style={{ ...indicatorStyles, background: '#0073E6' }}\n                  aria-label={`Selected: ${label} ${index + 1}`}\n                  title={`Selected: ${label} ${index + 1}`}\n                />\n              );\n            }\n            return (\n              <li\n                style={indicatorStyles}\n                onClick={onClickHandler}\n                onKeyDown={onClickHandler}\n                value={index}\n                key={index}\n                role=\"button\"\n                tabIndex={0}\n                title={`${label} ${index + 1}`}\n                aria-label={`${label} ${index + 1}`}\n              />\n            );\n          }}>\n          {files.map((f, index) => (\n            <div\n              key={`${f.name}-${f.type}`}\n              className={classes.slide}\n              onClick={() => handleClick(f, index)}\n            >\n              <AttachmentContent\n                className={classes.imgSlider}\n                value={f}\n              />\n            </div>\n          ))}\n        </Carousel>\n        {!files.length ? (\n          <span className={classes.noFileTextSlider}>\n            <NoImageIcon />\n            <p className={classes.noImageText}>{`No Attachment.${isReadOnly ? '' : ' Press ‘+’ Add'}`}</p>\n          </span>\n        ) : null\n        }\n\n        {/* <ExpandWhiteIcon /> */}\n      </div >\n    )\n  }\n  const renderGridView = () => {\n    return (\n      <>\n        <div\n          className={classnames(\n            classes.fieldsetWrapper,\n            classes.extraSpacing\n          )}\n        >\n          <Grid container spacing={3}>\n            {files.map((f, ind) => (\n              <Grid item xs={6} onClick={() => handleClick(f, ind)} key={`${f.filesIndividualRef}`}>\n                <DocumentThumbnail {...f} />\n              </Grid>\n            ))}\n\n          </Grid>\n        </div>\n        <div>\n          {!files.length ? (\n            <div className={classes.noFileText}>No files uploaded yet</div>\n          ) : null}\n        </div>\n      </>\n    )\n  }\n  return (\n    <>\n      <div className={clsx({\n        [classes.slideWrapper]: slideView,\n        [classes.withAttachment]: files.length\n      })}>\n        {slideView ? renderSlideView() : renderGridView()}\n\n        <input\n          type='file'\n          id='addAttachmentWorkflow'\n          // accept=\"image/png, image/gif, image/jpeg,\n          //     application/pdf,application/msword,\n          //     application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n          accept=\"image/png, image/jpeg,\n                            application/pdf\"\n          ref={inputFile}\n          style={{ display: 'none' }}\n          onClick={(event) => {\n            event.target.value = null\n          }}\n          onInput={handleFileUpload}\n        />\n        {!isReadOnly ? renderIcons() : null}\n\n\n      </div>\n\n      {shouldTakePhoto && (\n        <FullScreenDialog\n          modalTitle='Take Photo'\n          open\n          modalContent={\n            <CapturePhoto\n              onPhotoClick={handlePhotoClick}\n            />\n          }\n          onClose={handlePhotoClickClose}\n        />\n      )}\n      {showImages && (\n        <ImagePreview\n          currentFile={images[photoIndex]}\n          nextFile={images[(photoIndex + 1) % images.length]}\n          prevFile={images[(photoIndex + images.length - 1) % images.length]}\n          onCloseRequest={() => setShowImages(false)}\n          onMovePrevRequest={() => {\n            setPhotoIndex((photoIndex + images.length - 1) % images.length)\n          }}\n          onMoveNextRequest={() => {\n            setPhotoIndex((photoIndex + 1) % images.length)\n          }}\n        />\n      )}\n\n      {pdf && (\n        <FullScreenDialog\n          modalTitle={pdf.name}\n          open\n          modalContent={\n            <Document file={pdf.base64Data}>\n              <Page pageNumber={1} />\n            </Document>\n          }\n          onClose={() => { setPDF(undefined) }}\n        />\n      )}\n    </>\n  );\n}\n\n\nconst emptyObj = {};\nexport function AttachmentContent({ className, value = emptyObj }) {\n  const classes = useStyles();\n  const { filesIndividualRef, filesMainRef, relativePath } = value;\n  const dispatch = useDispatch();\n  const imgObj = useSelector(state => {\n    return selectors.assets(state, {\n      fileId: filesIndividualRef,\n      relativePath: relativePath\n    })\n  })\n\n  const byte64Url = useMemo(() => {\n    if (filesMainRef?.indexOf('.png') !== -1 || filesMainRef.indexOf('.jpeg') !== -1) {\n      if (imgObj?.byteArr) {\n        var binary = '';\n        var bytes = new Uint8Array(imgObj.byteArr);\n        var len = bytes.byteLength;\n        for (var i = 0; i < len; i++) {\n          binary += String.fromCharCode(bytes[i]);\n        }\n        var payloadData = 'data:image/jpeg;base64,' + window.btoa(binary);\n        return payloadData;\n      }\n    }\n    else {\n      return PDFImage;\n    }\n  }, [filesMainRef, imgObj.byteArr])\n\n  useEffect(() => {\n    if (imgObj && !('status' in imgObj)) {\n      dispatch(actions.assets.request({ fileId: filesIndividualRef, relativePath }))\n    }\n  }, [dispatch, filesIndividualRef, imgObj, relativePath])\n\n  return (\n    <div className={className} style={{ backgroundImage: `url(${byte64Url})` }}>\n      {imgObj?.status === 'requested' ? (\n        <Spinner type=\"beat\" speed={0.5} className={classes.spinner} size={50} />\n      ) : null}\n    </div>\n  )\n}\n\nfunction ImagePreview({ currentFile, nextFile, prevFile, ...others }) {\n  const currImgObj = useSelector(state => {\n    return selectors.assets(state, {\n      fileId: currentFile.filesIndividualRef,\n      relativePath: currentFile.relativePath\n    })\n  })\n  const nextImgObj = useSelector(state => {\n    return selectors.assets(state, {\n      fileId: nextFile.filesIndividualRef,\n      relativePath: nextFile.relativePath\n    })\n  })\n  const prevImgObj = useSelector(state => {\n    return selectors.assets(state, {\n      fileId: prevFile.filesIndividualRef,\n      relativePath: prevFile.relativePath\n    })\n  })\n\n  const currbyte64Url = useMemo(() => {\n    if (currImgObj?.byteArr) {\n      var binary = '';\n      var bytes = new Uint8Array(currImgObj.byteArr);\n      var len = bytes.byteLength;\n      for (var i = 0; i < len; i++) {\n        binary += String.fromCharCode(bytes[i]);\n      }\n      var payloadData = 'data:image/jpeg;base64,' + window.btoa(binary);\n      return payloadData;\n    }\n  }, [currImgObj.byteArr])\n\n  const nextbyte64Url = useMemo(() => {\n    if (nextImgObj?.byteArr) {\n      var binary = '';\n      var bytes = new Uint8Array(nextImgObj.byteArr);\n      var len = bytes.byteLength;\n      for (var i = 0; i < len; i++) {\n        binary += String.fromCharCode(bytes[i]);\n      }\n      var payloadData = 'data:image/jpeg;base64,' + window.btoa(binary);\n      return payloadData;\n    }\n  }, [nextImgObj.byteArr])\n\n  const prevbyte64Url = useMemo(() => {\n    if (prevImgObj?.byteArr) {\n      var binary = '';\n      var bytes = new Uint8Array(prevImgObj.byteArr);\n      var len = bytes.byteLength;\n      for (var i = 0; i < len; i++) {\n        binary += String.fromCharCode(bytes[i]);\n      }\n      var payloadData = 'data:image/jpeg;base64,' + window.btoa(binary);\n      return payloadData;\n    }\n  }, [prevImgObj.byteArr])\n\n  return (\n    <Lightbox\n      mainSrc={currbyte64Url}\n      nextSrc={nextbyte64Url}\n      prevSrc={prevbyte64Url}\n      {...others}\n    />\n  )\n}"]},"metadata":{},"sourceType":"module"}