{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/extends\";\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nimport { success, error, abort, isSuccessAction, isErrorAction, isResponseAction, getRequestActionFromResponse } from './actions'; // to support libraries like redux-act and redux-actions\n\nvar normalizeActionType = function normalizeActionType(actionType) {\n  return typeof actionType === 'function' ? actionType.toString() : actionType;\n};\n\nvar operationConfigHasRequestKey = function operationConfigHasRequestKey(config) {\n  return typeof config !== 'boolean' && !!config.getRequestKey;\n};\n\nvar getInitialRequestState = function getInitialRequestState(_ref) {\n  var getDefaultData = _ref.getDefaultData,\n      multiple = _ref.multiple,\n      operations = _ref.operations;\n  return {\n    data: getDefaultData(multiple),\n    pending: 0,\n    error: null,\n    operations: operations && Object.entries(operations).reduce(function (prev, _ref2) {\n      var _extends2;\n\n      var k = _ref2[0],\n          v = _ref2[1];\n      return _extends({}, prev, (_extends2 = {}, _extends2[k] = operationConfigHasRequestKey(v) ? {} : {\n        error: null,\n        pending: 0\n      }, _extends2));\n    }, {})\n  };\n};\n\nvar getInitialState = function getInitialState(state, reducer, config) {\n  if (!reducer) {\n    return getInitialRequestState(config);\n  }\n\n  return _extends({}, getInitialRequestState(config), reducer(undefined, {}));\n};\n\nvar getDataUpdaterForSuccess = function getDataUpdaterForSuccess(reducerConfig, operationConfig) {\n  if (operationConfig === true || typeof operationConfig !== 'boolean' && operationConfig.updateData === true) {\n    return reducerConfig.updateData || reducerConfig.getData;\n  } else if (typeof operationConfig === 'function') {\n    return operationConfig;\n  } else if (typeof operationConfig !== 'boolean' && typeof operationConfig.updateData !== 'boolean') {\n    return operationConfig.updateData;\n  }\n\n  return null;\n};\n\nvar defaultConfig = {\n  multiple: false,\n  getDefaultData: function getDefaultData(multiple) {\n    return multiple ? [] : null;\n  },\n  getData: function getData(state, action) {\n    return action.payload ? action.payload.data : action.data;\n  },\n  updateData: null,\n  getError: function getError(state, action) {\n    return action.payload ? action.payload : action.error;\n  },\n  onRequest: function onRequest(state) {\n    return _extends({}, state, {\n      pending: state.pending + 1,\n      error: null\n    });\n  },\n  onSuccess: function onSuccess(state, action, config) {\n    return _extends({}, state, {\n      data: config.getData(state, action, config),\n      pending: state.pending - 1,\n      error: null\n    });\n  },\n  onError: function onError(state, action, config) {\n    return _extends({}, state, {\n      data: config.getDefaultData(config.multiple),\n      pending: state.pending - 1,\n      error: config.getError(state, action, config)\n    });\n  },\n  onAbort: function onAbort(state) {\n    return _extends({}, state, {\n      pending: state.pending - 1\n    });\n  },\n  resetOn: [],\n  operations: null\n};\nexport var createRequestsReducer = function createRequestsReducer(globalConfig) {\n  if (globalConfig === void 0) {\n    globalConfig = {};\n  }\n\n  return function (localConfig, reducer) {\n    if (reducer === void 0) {\n      reducer = null;\n    }\n\n    var config = _extends({}, defaultConfig, globalConfig, localConfig);\n\n    var onRequest = config.onRequest,\n        onSuccess = config.onSuccess,\n        onError = config.onError,\n        onAbort = config.onAbort,\n        resetOn = config.resetOn,\n        getError = config.getError,\n        operations = config.operations,\n        actionType = config.actionType;\n    var normalizedActionType = normalizeActionType(actionType);\n    var shouldResetForAction = resetOn;\n\n    if (typeof resetOn !== 'function') {\n      var normalizedResetActions = resetOn.map(normalizeActionType);\n\n      shouldResetForAction = function shouldResetForAction(action) {\n        return normalizedResetActions.includes(action.type);\n      };\n    }\n\n    return function (state, action) {\n      var nextState = state === undefined ? getInitialState(state, reducer, config) : state;\n\n      if (shouldResetForAction(action)) {\n        nextState = _extends({}, getInitialState(nextState, reducer, config), {\n          pending: nextState.pending\n        });\n      }\n\n      if (operations && action.type in operations) {\n        var _extends3, _extends4;\n\n        var operationConfig = operations[action.type];\n        return _extends({}, nextState, {\n          data: operationConfig.updateDataOptimistic ? operationConfig.updateDataOptimistic(nextState, action, config) : nextState.data,\n          operations: _extends({}, nextState.operations, (_extends4 = {}, _extends4[action.type] = operationConfigHasRequestKey(operationConfig) ? _extends({}, nextState.operations[action.type], (_extends3 = {}, _extends3[operationConfig.getRequestKey(action)] = {\n            error: null,\n            pending: nextState.operations[action.type][operationConfig.getRequestKey(action)] ? nextState.operations[action.type][operationConfig.getRequestKey(action)].pending + 1 : 1\n          }, _extends3)) : {\n            error: null,\n            pending: nextState.operations[action.type].pending + 1\n          }, _extends4))\n        });\n      }\n\n      if (operations && isResponseAction(action) && getRequestActionFromResponse(action).type in operations) {\n        var _extends10;\n\n        var requestAction = getRequestActionFromResponse(action);\n        var _operationConfig = operations[requestAction.type];\n\n        var _nextState$operations = nextState.operations,\n            currentOperation = _nextState$operations[requestAction.type],\n            otherOperations = _objectWithoutPropertiesLoose(_nextState$operations, [requestAction.type].map(_toPropertyKey));\n\n        if (isSuccessAction(action)) {\n          var _extends6;\n\n          var dataUpdater = getDataUpdaterForSuccess(config, _operationConfig);\n\n          var _getUpdatedCurrentOperation = function _getUpdatedCurrentOperation() {\n            if (!operationConfigHasRequestKey(_operationConfig)) {\n              return {\n                error: null,\n                pending: currentOperation.pending - 1\n              };\n            }\n\n            var currentRequestKey = _operationConfig.getRequestKey(requestAction);\n\n            var operationForRequestKey = currentOperation[currentRequestKey],\n                remainingOperations = _objectWithoutPropertiesLoose(currentOperation, [currentRequestKey].map(_toPropertyKey));\n\n            if (operationForRequestKey.pending !== 1) {\n              var _extends5;\n\n              return _extends({}, remainingOperations, (_extends5 = {}, _extends5[currentRequestKey] = {\n                error: null,\n                pending: operationForRequestKey.pending - 1\n              }, _extends5));\n            }\n\n            return remainingOperations;\n          };\n\n          return _extends({}, nextState, {\n            data: dataUpdater ? dataUpdater(nextState, action, config) : nextState.data,\n            operations: _extends({}, otherOperations, (_extends6 = {}, _extends6[requestAction.type] = _getUpdatedCurrentOperation(), _extends6))\n          });\n        }\n\n        if (isErrorAction(action)) {\n          var _extends7, _extends8;\n\n          return _extends({}, nextState, {\n            data: _operationConfig.revertData ? _operationConfig.revertData(nextState, action, config) : nextState.data,\n            operations: _extends({}, otherOperations, (_extends8 = {}, _extends8[requestAction.type] = operationConfigHasRequestKey(_operationConfig) ? _extends({}, currentOperation, (_extends7 = {}, _extends7[_operationConfig.getRequestKey(requestAction)] = {\n              error: getError(nextState, action, config),\n              pending: currentOperation[_operationConfig.getRequestKey(requestAction)].pending - 1\n            }, _extends7)) : {\n              error: getError(nextState, action, config),\n              pending: currentOperation.pending - 1\n            }, _extends8))\n          });\n        } // abort case\n\n\n        var getUpdatedCurrentOperation = function getUpdatedCurrentOperation() {\n          if (!operationConfigHasRequestKey(_operationConfig)) {\n            return _extends({}, currentOperation, {\n              pending: currentOperation.pending - 1\n            });\n          }\n\n          var currentRequestKey = _operationConfig.getRequestKey(requestAction);\n\n          var operationForRequestKey = currentOperation[currentRequestKey],\n              remainingOperations = _objectWithoutPropertiesLoose(currentOperation, [currentRequestKey].map(_toPropertyKey));\n\n          if (operationForRequestKey.pending !== 1) {\n            var _extends9;\n\n            return _extends({}, remainingOperations, (_extends9 = {}, _extends9[currentRequestKey] = _extends({}, operationForRequestKey, {\n              pending: operationForRequestKey.pending - 1\n            }), _extends9));\n          }\n\n          return remainingOperations;\n        };\n\n        return _extends({}, nextState, {\n          data: _operationConfig.revertData ? _operationConfig.revertData(nextState, action, config) : nextState.data,\n          operations: _extends({}, otherOperations, (_extends10 = {}, _extends10[requestAction.type] = getUpdatedCurrentOperation(), _extends10))\n        });\n      }\n\n      switch (action.type) {\n        case normalizedActionType:\n          return onRequest(nextState, action, config);\n\n        case success(normalizedActionType):\n          return onSuccess(nextState, action, config);\n\n        case error(normalizedActionType):\n          return onError(nextState, action, config);\n\n        case abort(normalizedActionType):\n          return onAbort(nextState, action, config);\n\n        default:\n          return reducer ? reducer(nextState, action) : nextState;\n      }\n    };\n  };\n};\nexport var requestsReducer = createRequestsReducer();","map":{"version":3,"sources":["/Users/plsingh/Downloads/archive-19Sep-Sunday/node_modules/redux-saga-requests/es/reducers.js"],"names":["_objectWithoutPropertiesLoose","_extends","_toPropertyKey","arg","key","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","success","error","abort","isSuccessAction","isErrorAction","isResponseAction","getRequestActionFromResponse","normalizeActionType","actionType","toString","operationConfigHasRequestKey","config","getRequestKey","getInitialRequestState","_ref","getDefaultData","multiple","operations","data","pending","Object","entries","reduce","prev","_ref2","_extends2","k","v","getInitialState","state","reducer","getDataUpdaterForSuccess","reducerConfig","operationConfig","updateData","getData","defaultConfig","action","payload","getError","onRequest","onSuccess","onError","onAbort","resetOn","createRequestsReducer","globalConfig","localConfig","normalizedActionType","shouldResetForAction","normalizedResetActions","map","includes","type","nextState","_extends3","_extends4","updateDataOptimistic","_extends10","requestAction","_operationConfig","_nextState$operations","currentOperation","otherOperations","_extends6","dataUpdater","_getUpdatedCurrentOperation","currentRequestKey","operationForRequestKey","remainingOperations","_extends5","_extends7","_extends8","revertData","getUpdatedCurrentOperation","_extends9","requestsReducer"],"mappings":"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","sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/extends\";\n\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\n\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n\nimport { success, error, abort, isSuccessAction, isErrorAction, isResponseAction, getRequestActionFromResponse } from './actions'; // to support libraries like redux-act and redux-actions\n\nvar normalizeActionType = function normalizeActionType(actionType) {\n  return typeof actionType === 'function' ? actionType.toString() : actionType;\n};\n\nvar operationConfigHasRequestKey = function operationConfigHasRequestKey(config) {\n  return typeof config !== 'boolean' && !!config.getRequestKey;\n};\n\nvar getInitialRequestState = function getInitialRequestState(_ref) {\n  var getDefaultData = _ref.getDefaultData,\n      multiple = _ref.multiple,\n      operations = _ref.operations;\n  return {\n    data: getDefaultData(multiple),\n    pending: 0,\n    error: null,\n    operations: operations && Object.entries(operations).reduce(function (prev, _ref2) {\n      var _extends2;\n\n      var k = _ref2[0],\n          v = _ref2[1];\n      return _extends({}, prev, (_extends2 = {}, _extends2[k] = operationConfigHasRequestKey(v) ? {} : {\n        error: null,\n        pending: 0\n      }, _extends2));\n    }, {})\n  };\n};\n\nvar getInitialState = function getInitialState(state, reducer, config) {\n  if (!reducer) {\n    return getInitialRequestState(config);\n  }\n\n  return _extends({}, getInitialRequestState(config), reducer(undefined, {}));\n};\n\nvar getDataUpdaterForSuccess = function getDataUpdaterForSuccess(reducerConfig, operationConfig) {\n  if (operationConfig === true || typeof operationConfig !== 'boolean' && operationConfig.updateData === true) {\n    return reducerConfig.updateData || reducerConfig.getData;\n  } else if (typeof operationConfig === 'function') {\n    return operationConfig;\n  } else if (typeof operationConfig !== 'boolean' && typeof operationConfig.updateData !== 'boolean') {\n    return operationConfig.updateData;\n  }\n\n  return null;\n};\n\nvar defaultConfig = {\n  multiple: false,\n  getDefaultData: function getDefaultData(multiple) {\n    return multiple ? [] : null;\n  },\n  getData: function getData(state, action) {\n    return action.payload ? action.payload.data : action.data;\n  },\n  updateData: null,\n  getError: function getError(state, action) {\n    return action.payload ? action.payload : action.error;\n  },\n  onRequest: function onRequest(state) {\n    return _extends({}, state, {\n      pending: state.pending + 1,\n      error: null\n    });\n  },\n  onSuccess: function onSuccess(state, action, config) {\n    return _extends({}, state, {\n      data: config.getData(state, action, config),\n      pending: state.pending - 1,\n      error: null\n    });\n  },\n  onError: function onError(state, action, config) {\n    return _extends({}, state, {\n      data: config.getDefaultData(config.multiple),\n      pending: state.pending - 1,\n      error: config.getError(state, action, config)\n    });\n  },\n  onAbort: function onAbort(state) {\n    return _extends({}, state, {\n      pending: state.pending - 1\n    });\n  },\n  resetOn: [],\n  operations: null\n};\nexport var createRequestsReducer = function createRequestsReducer(globalConfig) {\n  if (globalConfig === void 0) {\n    globalConfig = {};\n  }\n\n  return function (localConfig, reducer) {\n    if (reducer === void 0) {\n      reducer = null;\n    }\n\n    var config = _extends({}, defaultConfig, globalConfig, localConfig);\n\n    var onRequest = config.onRequest,\n        onSuccess = config.onSuccess,\n        onError = config.onError,\n        onAbort = config.onAbort,\n        resetOn = config.resetOn,\n        getError = config.getError,\n        operations = config.operations,\n        actionType = config.actionType;\n    var normalizedActionType = normalizeActionType(actionType);\n    var shouldResetForAction = resetOn;\n\n    if (typeof resetOn !== 'function') {\n      var normalizedResetActions = resetOn.map(normalizeActionType);\n\n      shouldResetForAction = function shouldResetForAction(action) {\n        return normalizedResetActions.includes(action.type);\n      };\n    }\n\n    return function (state, action) {\n      var nextState = state === undefined ? getInitialState(state, reducer, config) : state;\n\n      if (shouldResetForAction(action)) {\n        nextState = _extends({}, getInitialState(nextState, reducer, config), {\n          pending: nextState.pending\n        });\n      }\n\n      if (operations && action.type in operations) {\n        var _extends3, _extends4;\n\n        var operationConfig = operations[action.type];\n        return _extends({}, nextState, {\n          data: operationConfig.updateDataOptimistic ? operationConfig.updateDataOptimistic(nextState, action, config) : nextState.data,\n          operations: _extends({}, nextState.operations, (_extends4 = {}, _extends4[action.type] = operationConfigHasRequestKey(operationConfig) ? _extends({}, nextState.operations[action.type], (_extends3 = {}, _extends3[operationConfig.getRequestKey(action)] = {\n            error: null,\n            pending: nextState.operations[action.type][operationConfig.getRequestKey(action)] ? nextState.operations[action.type][operationConfig.getRequestKey(action)].pending + 1 : 1\n          }, _extends3)) : {\n            error: null,\n            pending: nextState.operations[action.type].pending + 1\n          }, _extends4))\n        });\n      }\n\n      if (operations && isResponseAction(action) && getRequestActionFromResponse(action).type in operations) {\n        var _extends10;\n\n        var requestAction = getRequestActionFromResponse(action);\n        var _operationConfig = operations[requestAction.type];\n\n        var _nextState$operations = nextState.operations,\n            currentOperation = _nextState$operations[requestAction.type],\n            otherOperations = _objectWithoutPropertiesLoose(_nextState$operations, [requestAction.type].map(_toPropertyKey));\n\n        if (isSuccessAction(action)) {\n          var _extends6;\n\n          var dataUpdater = getDataUpdaterForSuccess(config, _operationConfig);\n\n          var _getUpdatedCurrentOperation = function _getUpdatedCurrentOperation() {\n            if (!operationConfigHasRequestKey(_operationConfig)) {\n              return {\n                error: null,\n                pending: currentOperation.pending - 1\n              };\n            }\n\n            var currentRequestKey = _operationConfig.getRequestKey(requestAction);\n\n            var operationForRequestKey = currentOperation[currentRequestKey],\n                remainingOperations = _objectWithoutPropertiesLoose(currentOperation, [currentRequestKey].map(_toPropertyKey));\n\n            if (operationForRequestKey.pending !== 1) {\n              var _extends5;\n\n              return _extends({}, remainingOperations, (_extends5 = {}, _extends5[currentRequestKey] = {\n                error: null,\n                pending: operationForRequestKey.pending - 1\n              }, _extends5));\n            }\n\n            return remainingOperations;\n          };\n\n          return _extends({}, nextState, {\n            data: dataUpdater ? dataUpdater(nextState, action, config) : nextState.data,\n            operations: _extends({}, otherOperations, (_extends6 = {}, _extends6[requestAction.type] = _getUpdatedCurrentOperation(), _extends6))\n          });\n        }\n\n        if (isErrorAction(action)) {\n          var _extends7, _extends8;\n\n          return _extends({}, nextState, {\n            data: _operationConfig.revertData ? _operationConfig.revertData(nextState, action, config) : nextState.data,\n            operations: _extends({}, otherOperations, (_extends8 = {}, _extends8[requestAction.type] = operationConfigHasRequestKey(_operationConfig) ? _extends({}, currentOperation, (_extends7 = {}, _extends7[_operationConfig.getRequestKey(requestAction)] = {\n              error: getError(nextState, action, config),\n              pending: currentOperation[_operationConfig.getRequestKey(requestAction)].pending - 1\n            }, _extends7)) : {\n              error: getError(nextState, action, config),\n              pending: currentOperation.pending - 1\n            }, _extends8))\n          });\n        } // abort case\n\n\n        var getUpdatedCurrentOperation = function getUpdatedCurrentOperation() {\n          if (!operationConfigHasRequestKey(_operationConfig)) {\n            return _extends({}, currentOperation, {\n              pending: currentOperation.pending - 1\n            });\n          }\n\n          var currentRequestKey = _operationConfig.getRequestKey(requestAction);\n\n          var operationForRequestKey = currentOperation[currentRequestKey],\n              remainingOperations = _objectWithoutPropertiesLoose(currentOperation, [currentRequestKey].map(_toPropertyKey));\n\n          if (operationForRequestKey.pending !== 1) {\n            var _extends9;\n\n            return _extends({}, remainingOperations, (_extends9 = {}, _extends9[currentRequestKey] = _extends({}, operationForRequestKey, {\n              pending: operationForRequestKey.pending - 1\n            }), _extends9));\n          }\n\n          return remainingOperations;\n        };\n\n        return _extends({}, nextState, {\n          data: _operationConfig.revertData ? _operationConfig.revertData(nextState, action, config) : nextState.data,\n          operations: _extends({}, otherOperations, (_extends10 = {}, _extends10[requestAction.type] = getUpdatedCurrentOperation(), _extends10))\n        });\n      }\n\n      switch (action.type) {\n        case normalizedActionType:\n          return onRequest(nextState, action, config);\n\n        case success(normalizedActionType):\n          return onSuccess(nextState, action, config);\n\n        case error(normalizedActionType):\n          return onError(nextState, action, config);\n\n        case abort(normalizedActionType):\n          return onAbort(nextState, action, config);\n\n        default:\n          return reducer ? reducer(nextState, action) : nextState;\n      }\n    };\n  };\n};\nexport var requestsReducer = createRequestsReducer();"]},"metadata":{},"sourceType":"module"}