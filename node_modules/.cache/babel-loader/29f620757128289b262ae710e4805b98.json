{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _extends from \"@babel/runtime/helpers/extends\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(getRequestInstance),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(sendRequest),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(cancelSendRequestOnAction),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime.mark(watchRequests),\n    _marked5 = /*#__PURE__*/_regeneratorRuntime.mark(countServerRequests);\n\nimport { call, fork, join, take, race, cancel, put, all, cancelled, getContext, setContext } from 'redux-saga/effects';\nimport { END } from 'redux-saga';\nimport { createSuccessAction, createErrorAction, createAbortAction, getActionPayload, getRequestActionFromResponse, isRequestAction, isResponseAction, isSuccessAction } from './actions';\nimport { REQUESTS_CONFIG, INCORRECT_PAYLOAD_ERROR, RUN_BY_INTERCEPTOR, INTERCEPTORS } from './constants';\n/* eslint-disable */\n\nvar delay = require('redux-saga').delay || require('@redux-saga/delay-p').default;\n/* eslint-enable */\n\n\nexport var voidCallback = function voidCallback() {};\nexport var defaultConfig = {\n  driver: null,\n  onRequest: null,\n  onSuccess: null,\n  onError: null,\n  onAbort: null\n};\nexport function createRequestInstance(config) {\n  var _setContext;\n\n  return setContext((_setContext = {}, _setContext[REQUESTS_CONFIG] = _extends({}, defaultConfig, config), _setContext));\n}\nexport function getRequestsConfig() {\n  return getContext(REQUESTS_CONFIG);\n}\nexport function getRequestInstance(driverType) {\n  var config, driver;\n  return _regeneratorRuntime.wrap(function getRequestInstance$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (driverType === void 0) {\n            driverType = null;\n          }\n\n          _context.next = 3;\n          return getRequestsConfig();\n\n        case 3:\n          config = _context.sent;\n          driver = driverType ? config.driver[driverType] : config.driver.default || config.driver;\n          return _context.abrupt(\"return\", driver.requestInstance);\n\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, this);\n}\n\nvar getDriver = function getDriver(requestsConfig, action) {\n  return action.meta && action.meta.driver ? requestsConfig.driver[action.meta.driver] : requestsConfig.driver.default || requestsConfig.driver;\n};\n\nexport function sendRequest(action, _temp) {\n  var _ref, _ref$dispatchRequestA, dispatchRequestAction, _ref$silent, silent, _ref$runOnRequest, runOnRequest, _ref$runOnSuccess, runOnSuccess, _ref$runOnError, runOnError, _ref$runOnAbort, runOnAbort, runByInterceptor, requestsConfig, driver, actionPayload, _setContext2, abortSource, response, responseError, _setContext3, _ref2, onErrorResponse, onErrorError, errorPayload, _setContext4, successPayload, _setContext5;\n\n  return _regeneratorRuntime.wrap(function sendRequest$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _ref = _temp === void 0 ? {} : _temp, _ref$dispatchRequestA = _ref.dispatchRequestAction, dispatchRequestAction = _ref$dispatchRequestA === void 0 ? false : _ref$dispatchRequestA, _ref$silent = _ref.silent, silent = _ref$silent === void 0 ? false : _ref$silent, _ref$runOnRequest = _ref.runOnRequest, runOnRequest = _ref$runOnRequest === void 0 ? null : _ref$runOnRequest, _ref$runOnSuccess = _ref.runOnSuccess, runOnSuccess = _ref$runOnSuccess === void 0 ? null : _ref$runOnSuccess, _ref$runOnError = _ref.runOnError, runOnError = _ref$runOnError === void 0 ? null : _ref$runOnError, _ref$runOnAbort = _ref.runOnAbort, runOnAbort = _ref$runOnAbort === void 0 ? null : _ref$runOnAbort;\n\n          if (isRequestAction(action)) {\n            _context2.next = 3;\n            break;\n          }\n\n          throw new Error(INCORRECT_PAYLOAD_ERROR);\n\n        case 3:\n          _context2.next = 5;\n          return getContext(RUN_BY_INTERCEPTOR);\n\n        case 5:\n          runByInterceptor = _context2.sent;\n          _context2.next = 8;\n          return getRequestsConfig();\n\n        case 8:\n          requestsConfig = _context2.sent;\n\n          if (!(dispatchRequestAction && !silent)) {\n            _context2.next = 16;\n            break;\n          }\n\n          action = _extends({}, action, {\n            meta: _extends({}, action.meta, {\n              runByWatcher: false\n            })\n          });\n          _context2.next = 13;\n          return put(action);\n\n        case 13:\n          action = _context2.sent;\n\n          if (!(action === null)) {\n            _context2.next = 16;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", {\n            serverSide: true\n          });\n\n        case 16:\n          _context2.next = 18;\n          return call(getDriver, requestsConfig, action);\n\n        case 18:\n          driver = _context2.sent;\n          actionPayload = getActionPayload(action);\n\n          if (!(requestsConfig.onRequest && (runOnRequest !== null ? runOnRequest : runByInterceptor !== INTERCEPTORS.ON_REQUEST))) {\n            _context2.next = 26;\n            break;\n          }\n\n          _context2.next = 23;\n          return setContext((_setContext2 = {}, _setContext2[RUN_BY_INTERCEPTOR] = INTERCEPTORS.ON_REQUEST, _setContext2));\n\n        case 23:\n          _context2.next = 25;\n          return call(requestsConfig.onRequest, actionPayload.request, action);\n\n        case 25:\n          actionPayload.request = _context2.sent;\n\n        case 26:\n          abortSource = driver.getAbortSource();\n          _context2.prev = 27;\n          _context2.prev = 28;\n\n          if (!(action.meta && action.meta.cacheResponse)) {\n            _context2.next = 33;\n            break;\n          }\n\n          response = action.meta.cacheResponse;\n          _context2.next = 42;\n          break;\n\n        case 33:\n          if (Array.isArray(actionPayload.request)) {\n            _context2.next = 39;\n            break;\n          }\n\n          _context2.next = 36;\n          return call([driver, 'sendRequest'], actionPayload.request, abortSource, action);\n\n        case 36:\n          response = _context2.sent;\n          _context2.next = 42;\n          break;\n\n        case 39:\n          _context2.next = 41;\n          return all(actionPayload.request.map(function (requestItem) {\n            return call([driver, 'sendRequest'], requestItem, abortSource, action);\n          }));\n\n        case 41:\n          response = _context2.sent;\n\n        case 42:\n          _context2.next = 47;\n          break;\n\n        case 44:\n          _context2.prev = 44;\n          _context2.t0 = _context2[\"catch\"](28);\n          responseError = _context2.t0;\n\n        case 47:\n          if (!responseError) {\n            _context2.next = 65;\n            break;\n          }\n\n          if (!(requestsConfig.onError && (runOnError !== null ? runOnError : runByInterceptor !== INTERCEPTORS.ON_ERROR))) {\n            _context2.next = 57;\n            break;\n          }\n\n          _context2.next = 51;\n          return setContext((_setContext3 = {}, _setContext3[RUN_BY_INTERCEPTOR] = INTERCEPTORS.ON_ERROR, _setContext3));\n\n        case 51:\n          _context2.next = 53;\n          return call(requestsConfig.onError, responseError, action);\n\n        case 53:\n          _ref2 = _context2.sent;\n          onErrorResponse = _ref2.response;\n          onErrorError = _ref2.error;\n\n          if (onErrorResponse) {\n            response = onErrorResponse;\n          } else {\n            responseError = onErrorError;\n          }\n\n        case 57:\n          if (response) {\n            _context2.next = 65;\n            break;\n          }\n\n          _context2.next = 60;\n          return call(driver.getErrorPayload, responseError);\n\n        case 60:\n          errorPayload = _context2.sent;\n\n          if (silent) {\n            _context2.next = 64;\n            break;\n          }\n\n          _context2.next = 64;\n          return put(createErrorAction(action, errorPayload));\n\n        case 64:\n          return _context2.abrupt(\"return\", {\n            error: responseError\n          });\n\n        case 65:\n          if (!(requestsConfig.onSuccess && (runOnSuccess !== null ? runOnSuccess : runByInterceptor !== INTERCEPTORS.ON_SUCCESS && runByInterceptor !== INTERCEPTORS.ON_ERROR))) {\n            _context2.next = 71;\n            break;\n          }\n\n          _context2.next = 68;\n          return setContext((_setContext4 = {}, _setContext4[RUN_BY_INTERCEPTOR] = INTERCEPTORS.ON_SUCCESS, _setContext4));\n\n        case 68:\n          _context2.next = 70;\n          return call(requestsConfig.onSuccess, response, action);\n\n        case 70:\n          response = _context2.sent;\n\n        case 71:\n          _context2.next = 73;\n          return call(driver.getSuccessPayload, response, actionPayload.request);\n\n        case 73:\n          successPayload = _context2.sent;\n\n          if (silent) {\n            _context2.next = 77;\n            break;\n          }\n\n          _context2.next = 77;\n          return put(createSuccessAction(action, successPayload, response));\n\n        case 77:\n          return _context2.abrupt(\"return\", {\n            response: response\n          });\n\n        case 78:\n          _context2.prev = 78;\n          _context2.next = 81;\n          return cancelled();\n\n        case 81:\n          if (!_context2.sent) {\n            _context2.next = 92;\n            break;\n          }\n\n          _context2.next = 84;\n          return call([driver, 'abortRequest'], abortSource);\n\n        case 84:\n          if (!(requestsConfig.onAbort && (runOnAbort !== null ? runOnAbort : runByInterceptor !== INTERCEPTORS.ON_ABORT))) {\n            _context2.next = 89;\n            break;\n          }\n\n          _context2.next = 87;\n          return setContext((_setContext5 = {}, _setContext5[RUN_BY_INTERCEPTOR] = INTERCEPTORS.ON_ABORT, _setContext5));\n\n        case 87:\n          _context2.next = 89;\n          return call(requestsConfig.onAbort, action);\n\n        case 89:\n          if (silent) {\n            _context2.next = 92;\n            break;\n          }\n\n          _context2.next = 92;\n          return put(createAbortAction(action));\n\n        case 92:\n          return _context2.finish(78);\n\n        case 93:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, this, [[27,, 78, 93], [28, 44]]);\n}\n\nvar isRequestReadOnly = function isRequestReadOnly(request) {\n  return !request.query && (!request.method || request.method.toLowerCase() === 'get') || request.query && !request.query.trim().startsWith('mutation');\n};\n\nvar watchRequestsDefaultConfig = {\n  takeLatest: function takeLatest(action) {\n    var _getActionPayload = getActionPayload(action),\n        request = _getActionPayload.request;\n\n    return Array.isArray(request) ? request.every(isRequestReadOnly) : isRequestReadOnly(request);\n  },\n  abortOn: null,\n  getLastActionKey: function getLastActionKey(action) {\n    return action.type;\n  }\n};\nexport function cancelSendRequestOnAction(abortOn, task) {\n  var _ref3, abortingAction;\n\n  return _regeneratorRuntime.wrap(function cancelSendRequestOnAction$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return race({\n            abortingAction: take(abortOn),\n            taskFinished: join(task),\n            timeout: call(delay, 10000) // taskFinished doesnt work for aborted tasks\n\n          });\n\n        case 2:\n          _ref3 = _context3.sent;\n          abortingAction = _ref3.abortingAction;\n\n          if (!abortingAction) {\n            _context3.next = 7;\n            break;\n          }\n\n          _context3.next = 7;\n          return cancel(task);\n\n        case 7:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, this);\n}\n\nvar isWatchable = function isWatchable(a) {\n  return isRequestAction(a) && (!a.meta || a.meta.runByWatcher !== false);\n};\n\nexport function watchRequests(commonConfig) {\n  var lastTasks, config, action, lastActionKey, takeLatest, activeTask, newTask, abortOn;\n  return _regeneratorRuntime.wrap(function watchRequests$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          if (commonConfig === void 0) {\n            commonConfig = {};\n          }\n\n          lastTasks = {};\n          config = _extends({}, watchRequestsDefaultConfig, commonConfig);\n\n        case 3:\n          if (!true) {\n            _context4.next = 24;\n            break;\n          }\n\n          _context4.next = 6;\n          return take(isWatchable);\n\n        case 6:\n          action = _context4.sent;\n          lastActionKey = config.getLastActionKey(action);\n          takeLatest = action.meta && action.meta.takeLatest !== undefined ? action.meta.takeLatest : typeof config.takeLatest === 'function' ? config.takeLatest(action) : config.takeLatest;\n\n          if (!takeLatest) {\n            _context4.next = 14;\n            break;\n          }\n\n          activeTask = lastTasks[lastActionKey];\n\n          if (!activeTask) {\n            _context4.next = 14;\n            break;\n          }\n\n          _context4.next = 14;\n          return cancel(activeTask);\n\n        case 14:\n          _context4.next = 16;\n          return fork(sendRequest, action);\n\n        case 16:\n          newTask = _context4.sent;\n\n          if (takeLatest) {\n            lastTasks[lastActionKey] = newTask;\n          }\n\n          abortOn = action.meta && action.meta.abortOn ? action.meta.abortOn : config.abortOn;\n\n          if (!abortOn) {\n            _context4.next = 22;\n            break;\n          }\n\n          _context4.next = 22;\n          return fork(cancelSendRequestOnAction, abortOn, newTask);\n\n        case 22:\n          _context4.next = 3;\n          break;\n\n        case 24:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4, this);\n}\nexport function countServerRequests(_ref4) {\n  var serverRequestActions, _ref4$finishOnFirstEr, finishOnFirstError, index, action;\n\n  return _regeneratorRuntime.wrap(function countServerRequests$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          serverRequestActions = _ref4.serverRequestActions, _ref4$finishOnFirstEr = _ref4.finishOnFirstError, finishOnFirstError = _ref4$finishOnFirstEr === void 0 ? true : _ref4$finishOnFirstEr;\n          index = 0;\n          serverRequestActions.requestActionsToIgnore = [];\n          serverRequestActions.successActions = [];\n          serverRequestActions.dependentSuccessActions = [];\n          serverRequestActions.errorActions = [];\n\n        case 6:\n          if (!true) {\n            _context5.next = 30;\n            break;\n          }\n\n          _context5.next = 9;\n          return take(function (a) {\n            return isRequestAction(a) || isResponseAction(a);\n          });\n\n        case 9:\n          action = _context5.sent;\n\n          if (!isRequestAction(action)) {\n            _context5.next = 13;\n            break;\n          }\n\n          index += action.meta && action.meta.dependentRequestsNumber !== undefined ? action.meta.dependentRequestsNumber + 1 : 1;\n          return _context5.abrupt(\"continue\", 6);\n\n        case 13:\n          if (isSuccessAction(action)) {\n            _context5.next = 21;\n            break;\n          }\n\n          serverRequestActions.errorActions.push(action);\n\n          if (!finishOnFirstError) {\n            _context5.next = 19;\n            break;\n          }\n\n          _context5.next = 18;\n          return put(END);\n\n        case 18:\n          return _context5.abrupt(\"return\");\n\n        case 19:\n          _context5.next = 22;\n          break;\n\n        case 21:\n          if (action.meta.isDependentRequest) {\n            serverRequestActions.dependentSuccessActions.push(action);\n          } else {\n            serverRequestActions.successActions.push(action);\n          }\n\n        case 22:\n          index -= action.meta.isDependentRequest ? 2 : 1;\n\n          if (!(index === 0)) {\n            _context5.next = 28;\n            break;\n          }\n\n          serverRequestActions.requestActionsToIgnore = serverRequestActions.successActions.map(getRequestActionFromResponse).map(function (a) {\n            return {\n              type: a.type\n            };\n          });\n          _context5.next = 27;\n          return put(END);\n\n        case 27:\n          return _context5.abrupt(\"return\");\n\n        case 28:\n          _context5.next = 6;\n          break;\n\n        case 30:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5, this);\n}","map":{"version":3,"sources":["/Users/plsingh/Downloads/archive-19Sep-Sunday/node_modules/redux-saga-requests/es/sagas.js"],"names":["_regeneratorRuntime","_extends","_marked","mark","getRequestInstance","_marked2","sendRequest","_marked3","cancelSendRequestOnAction","_marked4","watchRequests","_marked5","countServerRequests","call","fork","join","take","race","cancel","put","all","cancelled","getContext","setContext","END","createSuccessAction","createErrorAction","createAbortAction","getActionPayload","getRequestActionFromResponse","isRequestAction","isResponseAction","isSuccessAction","REQUESTS_CONFIG","INCORRECT_PAYLOAD_ERROR","RUN_BY_INTERCEPTOR","INTERCEPTORS","delay","require","default","voidCallback","defaultConfig","driver","onRequest","onSuccess","onError","onAbort","createRequestInstance","config","_setContext","getRequestsConfig","driverType","wrap","getRequestInstance$","_context","prev","next","sent","abrupt","requestInstance","stop","getDriver","requestsConfig","action","meta","_temp","_ref","_ref$dispatchRequestA","dispatchRequestAction","_ref$silent","silent","_ref$runOnRequest","runOnRequest","_ref$runOnSuccess","runOnSuccess","_ref$runOnError","runOnError","_ref$runOnAbort","runOnAbort","runByInterceptor","actionPayload","_setContext2","abortSource","response","responseError","_setContext3","_ref2","onErrorResponse","onErrorError","errorPayload","_setContext4","successPayload","_setContext5","sendRequest$","_context2","Error","runByWatcher","serverSide","ON_REQUEST","request","getAbortSource","cacheResponse","Array","isArray","map","requestItem","t0","ON_ERROR","error","getErrorPayload","ON_SUCCESS","getSuccessPayload","ON_ABORT","finish","isRequestReadOnly","query","method","toLowerCase","trim","startsWith","watchRequestsDefaultConfig","takeLatest","_getActionPayload","every","abortOn","getLastActionKey","type","task","_ref3","abortingAction","cancelSendRequestOnAction$","_context3","taskFinished","timeout","isWatchable","a","commonConfig","lastTasks","lastActionKey","activeTask","newTask","watchRequests$","_context4","undefined","_ref4","serverRequestActions","_ref4$finishOnFirstEr","finishOnFirstError","index","countServerRequests$","_context5","requestActionsToIgnore","successActions","dependentSuccessActions","errorActions","dependentRequestsNumber","push","isDependentRequest"],"mappings":"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","sourcesContent":["import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _extends from \"@babel/runtime/helpers/extends\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(getRequestInstance),\n    _marked2 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(sendRequest),\n    _marked3 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(cancelSendRequestOnAction),\n    _marked4 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(watchRequests),\n    _marked5 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(countServerRequests);\n\nimport { call, fork, join, take, race, cancel, put, all, cancelled, getContext, setContext } from 'redux-saga/effects';\nimport { END } from 'redux-saga';\nimport { createSuccessAction, createErrorAction, createAbortAction, getActionPayload, getRequestActionFromResponse, isRequestAction, isResponseAction, isSuccessAction } from './actions';\nimport { REQUESTS_CONFIG, INCORRECT_PAYLOAD_ERROR, RUN_BY_INTERCEPTOR, INTERCEPTORS } from './constants';\n/* eslint-disable */\n\nvar delay = require('redux-saga').delay || require('@redux-saga/delay-p').default;\n/* eslint-enable */\n\n\nexport var voidCallback = function voidCallback() {};\nexport var defaultConfig = {\n  driver: null,\n  onRequest: null,\n  onSuccess: null,\n  onError: null,\n  onAbort: null\n};\nexport function createRequestInstance(config) {\n  var _setContext;\n\n  return setContext((_setContext = {}, _setContext[REQUESTS_CONFIG] = _extends({}, defaultConfig, config), _setContext));\n}\nexport function getRequestsConfig() {\n  return getContext(REQUESTS_CONFIG);\n}\nexport function getRequestInstance(driverType) {\n  var config, driver;\n  return _regeneratorRuntime.wrap(function getRequestInstance$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (driverType === void 0) {\n            driverType = null;\n          }\n\n          _context.next = 3;\n          return getRequestsConfig();\n\n        case 3:\n          config = _context.sent;\n          driver = driverType ? config.driver[driverType] : config.driver.default || config.driver;\n          return _context.abrupt(\"return\", driver.requestInstance);\n\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, this);\n}\n\nvar getDriver = function getDriver(requestsConfig, action) {\n  return action.meta && action.meta.driver ? requestsConfig.driver[action.meta.driver] : requestsConfig.driver.default || requestsConfig.driver;\n};\n\nexport function sendRequest(action, _temp) {\n  var _ref, _ref$dispatchRequestA, dispatchRequestAction, _ref$silent, silent, _ref$runOnRequest, runOnRequest, _ref$runOnSuccess, runOnSuccess, _ref$runOnError, runOnError, _ref$runOnAbort, runOnAbort, runByInterceptor, requestsConfig, driver, actionPayload, _setContext2, abortSource, response, responseError, _setContext3, _ref2, onErrorResponse, onErrorError, errorPayload, _setContext4, successPayload, _setContext5;\n\n  return _regeneratorRuntime.wrap(function sendRequest$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _ref = _temp === void 0 ? {} : _temp, _ref$dispatchRequestA = _ref.dispatchRequestAction, dispatchRequestAction = _ref$dispatchRequestA === void 0 ? false : _ref$dispatchRequestA, _ref$silent = _ref.silent, silent = _ref$silent === void 0 ? false : _ref$silent, _ref$runOnRequest = _ref.runOnRequest, runOnRequest = _ref$runOnRequest === void 0 ? null : _ref$runOnRequest, _ref$runOnSuccess = _ref.runOnSuccess, runOnSuccess = _ref$runOnSuccess === void 0 ? null : _ref$runOnSuccess, _ref$runOnError = _ref.runOnError, runOnError = _ref$runOnError === void 0 ? null : _ref$runOnError, _ref$runOnAbort = _ref.runOnAbort, runOnAbort = _ref$runOnAbort === void 0 ? null : _ref$runOnAbort;\n\n          if (isRequestAction(action)) {\n            _context2.next = 3;\n            break;\n          }\n\n          throw new Error(INCORRECT_PAYLOAD_ERROR);\n\n        case 3:\n          _context2.next = 5;\n          return getContext(RUN_BY_INTERCEPTOR);\n\n        case 5:\n          runByInterceptor = _context2.sent;\n          _context2.next = 8;\n          return getRequestsConfig();\n\n        case 8:\n          requestsConfig = _context2.sent;\n\n          if (!(dispatchRequestAction && !silent)) {\n            _context2.next = 16;\n            break;\n          }\n\n          action = _extends({}, action, {\n            meta: _extends({}, action.meta, {\n              runByWatcher: false\n            })\n          });\n          _context2.next = 13;\n          return put(action);\n\n        case 13:\n          action = _context2.sent;\n\n          if (!(action === null)) {\n            _context2.next = 16;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", {\n            serverSide: true\n          });\n\n        case 16:\n          _context2.next = 18;\n          return call(getDriver, requestsConfig, action);\n\n        case 18:\n          driver = _context2.sent;\n          actionPayload = getActionPayload(action);\n\n          if (!(requestsConfig.onRequest && (runOnRequest !== null ? runOnRequest : runByInterceptor !== INTERCEPTORS.ON_REQUEST))) {\n            _context2.next = 26;\n            break;\n          }\n\n          _context2.next = 23;\n          return setContext((_setContext2 = {}, _setContext2[RUN_BY_INTERCEPTOR] = INTERCEPTORS.ON_REQUEST, _setContext2));\n\n        case 23:\n          _context2.next = 25;\n          return call(requestsConfig.onRequest, actionPayload.request, action);\n\n        case 25:\n          actionPayload.request = _context2.sent;\n\n        case 26:\n          abortSource = driver.getAbortSource();\n          _context2.prev = 27;\n          _context2.prev = 28;\n\n          if (!(action.meta && action.meta.cacheResponse)) {\n            _context2.next = 33;\n            break;\n          }\n\n          response = action.meta.cacheResponse;\n          _context2.next = 42;\n          break;\n\n        case 33:\n          if (Array.isArray(actionPayload.request)) {\n            _context2.next = 39;\n            break;\n          }\n\n          _context2.next = 36;\n          return call([driver, 'sendRequest'], actionPayload.request, abortSource, action);\n\n        case 36:\n          response = _context2.sent;\n          _context2.next = 42;\n          break;\n\n        case 39:\n          _context2.next = 41;\n          return all(actionPayload.request.map(function (requestItem) {\n            return call([driver, 'sendRequest'], requestItem, abortSource, action);\n          }));\n\n        case 41:\n          response = _context2.sent;\n\n        case 42:\n          _context2.next = 47;\n          break;\n\n        case 44:\n          _context2.prev = 44;\n          _context2.t0 = _context2[\"catch\"](28);\n          responseError = _context2.t0;\n\n        case 47:\n          if (!responseError) {\n            _context2.next = 65;\n            break;\n          }\n\n          if (!(requestsConfig.onError && (runOnError !== null ? runOnError : runByInterceptor !== INTERCEPTORS.ON_ERROR))) {\n            _context2.next = 57;\n            break;\n          }\n\n          _context2.next = 51;\n          return setContext((_setContext3 = {}, _setContext3[RUN_BY_INTERCEPTOR] = INTERCEPTORS.ON_ERROR, _setContext3));\n\n        case 51:\n          _context2.next = 53;\n          return call(requestsConfig.onError, responseError, action);\n\n        case 53:\n          _ref2 = _context2.sent;\n          onErrorResponse = _ref2.response;\n          onErrorError = _ref2.error;\n\n          if (onErrorResponse) {\n            response = onErrorResponse;\n          } else {\n            responseError = onErrorError;\n          }\n\n        case 57:\n          if (response) {\n            _context2.next = 65;\n            break;\n          }\n\n          _context2.next = 60;\n          return call(driver.getErrorPayload, responseError);\n\n        case 60:\n          errorPayload = _context2.sent;\n\n          if (silent) {\n            _context2.next = 64;\n            break;\n          }\n\n          _context2.next = 64;\n          return put(createErrorAction(action, errorPayload));\n\n        case 64:\n          return _context2.abrupt(\"return\", {\n            error: responseError\n          });\n\n        case 65:\n          if (!(requestsConfig.onSuccess && (runOnSuccess !== null ? runOnSuccess : runByInterceptor !== INTERCEPTORS.ON_SUCCESS && runByInterceptor !== INTERCEPTORS.ON_ERROR))) {\n            _context2.next = 71;\n            break;\n          }\n\n          _context2.next = 68;\n          return setContext((_setContext4 = {}, _setContext4[RUN_BY_INTERCEPTOR] = INTERCEPTORS.ON_SUCCESS, _setContext4));\n\n        case 68:\n          _context2.next = 70;\n          return call(requestsConfig.onSuccess, response, action);\n\n        case 70:\n          response = _context2.sent;\n\n        case 71:\n          _context2.next = 73;\n          return call(driver.getSuccessPayload, response, actionPayload.request);\n\n        case 73:\n          successPayload = _context2.sent;\n\n          if (silent) {\n            _context2.next = 77;\n            break;\n          }\n\n          _context2.next = 77;\n          return put(createSuccessAction(action, successPayload, response));\n\n        case 77:\n          return _context2.abrupt(\"return\", {\n            response: response\n          });\n\n        case 78:\n          _context2.prev = 78;\n          _context2.next = 81;\n          return cancelled();\n\n        case 81:\n          if (!_context2.sent) {\n            _context2.next = 92;\n            break;\n          }\n\n          _context2.next = 84;\n          return call([driver, 'abortRequest'], abortSource);\n\n        case 84:\n          if (!(requestsConfig.onAbort && (runOnAbort !== null ? runOnAbort : runByInterceptor !== INTERCEPTORS.ON_ABORT))) {\n            _context2.next = 89;\n            break;\n          }\n\n          _context2.next = 87;\n          return setContext((_setContext5 = {}, _setContext5[RUN_BY_INTERCEPTOR] = INTERCEPTORS.ON_ABORT, _setContext5));\n\n        case 87:\n          _context2.next = 89;\n          return call(requestsConfig.onAbort, action);\n\n        case 89:\n          if (silent) {\n            _context2.next = 92;\n            break;\n          }\n\n          _context2.next = 92;\n          return put(createAbortAction(action));\n\n        case 92:\n          return _context2.finish(78);\n\n        case 93:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, this, [[27,, 78, 93], [28, 44]]);\n}\n\nvar isRequestReadOnly = function isRequestReadOnly(request) {\n  return !request.query && (!request.method || request.method.toLowerCase() === 'get') || request.query && !request.query.trim().startsWith('mutation');\n};\n\nvar watchRequestsDefaultConfig = {\n  takeLatest: function takeLatest(action) {\n    var _getActionPayload = getActionPayload(action),\n        request = _getActionPayload.request;\n\n    return Array.isArray(request) ? request.every(isRequestReadOnly) : isRequestReadOnly(request);\n  },\n  abortOn: null,\n  getLastActionKey: function getLastActionKey(action) {\n    return action.type;\n  }\n};\nexport function cancelSendRequestOnAction(abortOn, task) {\n  var _ref3, abortingAction;\n\n  return _regeneratorRuntime.wrap(function cancelSendRequestOnAction$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return race({\n            abortingAction: take(abortOn),\n            taskFinished: join(task),\n            timeout: call(delay, 10000) // taskFinished doesnt work for aborted tasks\n\n          });\n\n        case 2:\n          _ref3 = _context3.sent;\n          abortingAction = _ref3.abortingAction;\n\n          if (!abortingAction) {\n            _context3.next = 7;\n            break;\n          }\n\n          _context3.next = 7;\n          return cancel(task);\n\n        case 7:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, this);\n}\n\nvar isWatchable = function isWatchable(a) {\n  return isRequestAction(a) && (!a.meta || a.meta.runByWatcher !== false);\n};\n\nexport function watchRequests(commonConfig) {\n  var lastTasks, config, action, lastActionKey, takeLatest, activeTask, newTask, abortOn;\n  return _regeneratorRuntime.wrap(function watchRequests$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          if (commonConfig === void 0) {\n            commonConfig = {};\n          }\n\n          lastTasks = {};\n          config = _extends({}, watchRequestsDefaultConfig, commonConfig);\n\n        case 3:\n          if (!true) {\n            _context4.next = 24;\n            break;\n          }\n\n          _context4.next = 6;\n          return take(isWatchable);\n\n        case 6:\n          action = _context4.sent;\n          lastActionKey = config.getLastActionKey(action);\n          takeLatest = action.meta && action.meta.takeLatest !== undefined ? action.meta.takeLatest : typeof config.takeLatest === 'function' ? config.takeLatest(action) : config.takeLatest;\n\n          if (!takeLatest) {\n            _context4.next = 14;\n            break;\n          }\n\n          activeTask = lastTasks[lastActionKey];\n\n          if (!activeTask) {\n            _context4.next = 14;\n            break;\n          }\n\n          _context4.next = 14;\n          return cancel(activeTask);\n\n        case 14:\n          _context4.next = 16;\n          return fork(sendRequest, action);\n\n        case 16:\n          newTask = _context4.sent;\n\n          if (takeLatest) {\n            lastTasks[lastActionKey] = newTask;\n          }\n\n          abortOn = action.meta && action.meta.abortOn ? action.meta.abortOn : config.abortOn;\n\n          if (!abortOn) {\n            _context4.next = 22;\n            break;\n          }\n\n          _context4.next = 22;\n          return fork(cancelSendRequestOnAction, abortOn, newTask);\n\n        case 22:\n          _context4.next = 3;\n          break;\n\n        case 24:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4, this);\n}\nexport function countServerRequests(_ref4) {\n  var serverRequestActions, _ref4$finishOnFirstEr, finishOnFirstError, index, action;\n\n  return _regeneratorRuntime.wrap(function countServerRequests$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          serverRequestActions = _ref4.serverRequestActions, _ref4$finishOnFirstEr = _ref4.finishOnFirstError, finishOnFirstError = _ref4$finishOnFirstEr === void 0 ? true : _ref4$finishOnFirstEr;\n          index = 0;\n          serverRequestActions.requestActionsToIgnore = [];\n          serverRequestActions.successActions = [];\n          serverRequestActions.dependentSuccessActions = [];\n          serverRequestActions.errorActions = [];\n\n        case 6:\n          if (!true) {\n            _context5.next = 30;\n            break;\n          }\n\n          _context5.next = 9;\n          return take(function (a) {\n            return isRequestAction(a) || isResponseAction(a);\n          });\n\n        case 9:\n          action = _context5.sent;\n\n          if (!isRequestAction(action)) {\n            _context5.next = 13;\n            break;\n          }\n\n          index += action.meta && action.meta.dependentRequestsNumber !== undefined ? action.meta.dependentRequestsNumber + 1 : 1;\n          return _context5.abrupt(\"continue\", 6);\n\n        case 13:\n          if (isSuccessAction(action)) {\n            _context5.next = 21;\n            break;\n          }\n\n          serverRequestActions.errorActions.push(action);\n\n          if (!finishOnFirstError) {\n            _context5.next = 19;\n            break;\n          }\n\n          _context5.next = 18;\n          return put(END);\n\n        case 18:\n          return _context5.abrupt(\"return\");\n\n        case 19:\n          _context5.next = 22;\n          break;\n\n        case 21:\n          if (action.meta.isDependentRequest) {\n            serverRequestActions.dependentSuccessActions.push(action);\n          } else {\n            serverRequestActions.successActions.push(action);\n          }\n\n        case 22:\n          index -= action.meta.isDependentRequest ? 2 : 1;\n\n          if (!(index === 0)) {\n            _context5.next = 28;\n            break;\n          }\n\n          serverRequestActions.requestActionsToIgnore = serverRequestActions.successActions.map(getRequestActionFromResponse).map(function (a) {\n            return {\n              type: a.type\n            };\n          });\n          _context5.next = 27;\n          return put(END);\n\n        case 27:\n          return _context5.abrupt(\"return\");\n\n        case 28:\n          _context5.next = 6;\n          break;\n\n        case 30:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5, this);\n}"]},"metadata":{},"sourceType":"module"}