{"ast":null,"code":"var _jsxFileName = \"/Users/plsingh/Downloads/archive-19Sep-Sunday/src/pages/WorkRequest/Manage/index.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useHistory, useLocation, useRouteMatch } from 'react-router-dom';\nimport TabContainer from \"../../../components/TabContainer/index.jsx\";\nimport PageHeader from \"../../../components/PageHeader/index.jsx\";\nimport ActionPanel from \"./ActionPanel/index.jsx\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport actions from \"../../../actions/index.js\";\nimport { makeStyles } from \"@material-ui/core\";\nimport { selectors } from \"../../../reducers/index.js\";\nimport { WR_TABS } from \"./constant.js\";\nimport FormWrapper from \"../../../components/Form/FormWrapper/index.jsx\";\nimport WRForm from \"./Form.jsx\";\nimport { useTranslation } from 'react-i18next';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Ext = window.Ext;\nconst useStyles = makeStyles({\n  topSection: {\n    height: `calc(100vh - 43px)`,\n    display: 'flex',\n    flexDirection: 'column'\n  }\n});\nconst tabsData = [{\n  index: 1,\n  title: 'workrequest.wrInfo',\n  type: WR_TABS.WR_INFO,\n  active: true\n}, {\n  index: 2,\n  type: WR_TABS.DETAIL,\n  title: 'workrequest.detail'\n}, {\n  index: 3,\n  type: WR_TABS.ATTACHMENT,\n  title: 'workrequest.attachment'\n}];\nexport default function ManageWorkRequest() {\n  _s();\n\n  const history = useHistory();\n  const location = useLocation();\n  const refToTop = useRef();\n  const match = useRouteMatch();\n  console.log(\"match\", match, location);\n  const dispatch = useDispatch();\n  const classes = useStyles();\n  const {\n    t\n  } = useTranslation();\n  const {\n    id\n  } = match.params;\n  console.log(\"id*****\", id);\n  const {\n    saveErrorMsg,\n    workrequestNo,\n    saveStatus\n  } = useSelector(state => selectors.workflow(state), shallowEqual);\n  const fileListError = useSelector(state => {\n    const {\n      value\n    } = selectors.workflow(state);\n    return (value === null || value === void 0 ? void 0 : value.fileListError) || '';\n  });\n  const title = useMemo(() => {\n    if (match.url.indexOf('/copy') !== -1 || !id) {\n      return 'workrequest.create_title';\n    }\n\n    return 'workrequest.edit_title';\n  }, [id, match.url]);\n  useEffect(() => {\n    let mode;\n\n    if (match.url.indexOf('/copy') !== -1) {\n      mode = 'copy';\n    } else if (id) {\n      mode = 'edit';\n    } else {\n      mode = 'create';\n    }\n\n    dispatch(actions.workflow.update.init(id || 'new', mode));\n  }, [dispatch, id, match.url]);\n  const [activeTab, setActiveTab] = useState(1);\n\n  const onTabChange = index => {\n    setActiveTab(index);\n  };\n\n  const handleFieldChange = (field, value) => {\n    dispatch(actions.workflow.update.patchField(field, value));\n  };\n\n  useEffect(() => {\n    if (saveErrorMsg) {\n      Ext.Msg.alert(t(\"error\"), saveErrorMsg);\n      Ext.Msg.setHideAnimation(null);\n    }\n  }, [saveErrorMsg, t]);\n  useEffect(() => {\n    if (fileListError) {\n      Ext.Msg.alert(t(\"error\"), fileListError);\n      Ext.Msg.setHideAnimation(null);\n    }\n  }, [fileListError, t]);\n  useEffect(() => {\n    return () => {\n      dispatch(actions.workflow.update.clean());\n    };\n  }, [dispatch]);\n  useEffect(() => {\n    if (saveStatus === 'completed') {\n      Ext.Msg.alert(t(\"workrequest.create_success_title\"), `${t(\"workrequest.request_no\")}: ${workrequestNo}`);\n      Ext.Msg.setHideAnimation(null);\n      setTimeout(() => {\n        history.goBack();\n      }, 1000);\n    }\n  }, [history, saveStatus, t, workrequestNo]);\n  useEffect(() => {\n    var _refToTop$current;\n\n    refToTop === null || refToTop === void 0 ? void 0 : (_refToTop$current = refToTop.current) === null || _refToTop$current === void 0 ? void 0 : _refToTop$current.scrollIntoView();\n  }, [activeTab]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.topSection,\n    children: [/*#__PURE__*/_jsxDEV(PageHeader, {\n      showBack: true,\n      showNav: false,\n      title: t(title)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TabContainer, {\n      tabsData: tabsData,\n      activeTab: activeTab,\n      onChange: onTabChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FormWrapper, {\n      wrapperRef: refToTop,\n      children: /*#__PURE__*/_jsxDEV(WRForm, {\n        activeTab: tabsData[activeTab - 1].type,\n        onFieldChange: handleFieldChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ActionPanel, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ManageWorkRequest, \"9ITGci4xXJ5KjeGT1dfnqb5EEmQ=\", false, function () {\n  return [useHistory, useLocation, useRouteMatch, useDispatch, useStyles, useTranslation, useSelector, useSelector];\n});\n\n_c = ManageWorkRequest;\n\nvar _c;\n\n$RefreshReg$(_c, \"ManageWorkRequest\");","map":{"version":3,"sources":["/Users/plsingh/Downloads/archive-19Sep-Sunday/src/pages/WorkRequest/Manage/index.jsx"],"names":["useEffect","useMemo","useRef","useState","useHistory","useLocation","useRouteMatch","TabContainer","PageHeader","ActionPanel","shallowEqual","useDispatch","useSelector","actions","makeStyles","selectors","WR_TABS","FormWrapper","WRForm","useTranslation","Ext","window","useStyles","topSection","height","display","flexDirection","tabsData","index","title","type","WR_INFO","active","DETAIL","ATTACHMENT","ManageWorkRequest","history","location","refToTop","match","console","log","dispatch","classes","t","id","params","saveErrorMsg","workrequestNo","saveStatus","state","workflow","fileListError","value","url","indexOf","mode","update","init","activeTab","setActiveTab","onTabChange","handleFieldChange","field","patchField","Msg","alert","setHideAnimation","clean","setTimeout","goBack","current","scrollIntoView"],"mappings":"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","sourcesContent":["import { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useHistory, useLocation, useRouteMatch } from 'react-router-dom';\nimport TabContainer from \"../../../components/TabContainer/index.jsx\";\nimport PageHeader from \"../../../components/PageHeader/index.jsx\";\nimport ActionPanel from \"./ActionPanel/index.jsx\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport actions from \"../../../actions/index.js\";\nimport { makeStyles } from \"@material-ui/core\";\nimport { selectors } from \"../../../reducers/index.js\";\nimport { WR_TABS } from \"./constant.js\";\nimport FormWrapper from \"../../../components/Form/FormWrapper/index.jsx\";\nimport WRForm from \"./Form.jsx\";\nimport { useTranslation } from 'react-i18next';\nconst Ext = window.Ext;\n\nconst useStyles = makeStyles({\n  topSection: {\n    height: `calc(100vh - 43px)`,\n    display: 'flex',\n    flexDirection: 'column'\n  }\n});\n\nconst tabsData = [\n  {\n    index: 1,\n    title: 'workrequest.wrInfo',\n    type: WR_TABS.WR_INFO,\n    active: true,\n  },\n  {\n    index: 2,\n    type: WR_TABS.DETAIL,\n    title: 'workrequest.detail',\n  },\n  {\n    index: 3,\n    type: WR_TABS.ATTACHMENT,\n    title: 'workrequest.attachment',\n  },\n];\nexport default function ManageWorkRequest() {\n  const history = useHistory();\n  const location = useLocation();\n  const refToTop = useRef();\n  const match = useRouteMatch();\n  console.log(\"match\", match, location)\n  \n  const dispatch = useDispatch();\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  const { id } = match.params;\n  console.log(\"id*****\", id)\n  const { saveErrorMsg, workrequestNo, saveStatus } = useSelector(state => selectors.workflow(state), shallowEqual);\n  const  fileListError =  useSelector(state => {\n      const {value} = selectors.workflow(state);\n      return value?.fileListError || ''\n  });\n  const title = useMemo(()=>{\n    if(match.url.indexOf('/copy') !== -1 || !id){\n      return 'workrequest.create_title'\n    }\n    return 'workrequest.edit_title';\n  },[id, match.url])\n  \n  useEffect(() => {\n    let mode;\n    if(match.url.indexOf('/copy') !== -1){\n      mode = 'copy';\n    }\n    else if(id){\n      mode = 'edit';\n    }\n    else {\n      mode = 'create';\n    }\n    dispatch(actions.workflow.update.init(id || 'new', mode));\n  }, [dispatch, id, match.url])\n\n  const [activeTab, setActiveTab] = useState(1);\n\n  const onTabChange = index => {\n    setActiveTab(index);\n  };\n\n  const handleFieldChange = (field, value) => {\n    dispatch(actions.workflow.update.patchField(field, value));\n  }\n\n  useEffect(() => {\n    if (saveErrorMsg) {\n      Ext.Msg.alert(t(\"error\"), saveErrorMsg);\n      Ext.Msg.setHideAnimation(null);\n    }\n  }, [saveErrorMsg, t])\n\n\n  useEffect(() => {\n    if (fileListError) {\n      Ext.Msg.alert(t(\"error\"), fileListError);\n      Ext.Msg.setHideAnimation(null);\n    }\n  }, [fileListError, t])\n  \n\n  useEffect(() => {\n    return (() => {\n      dispatch(actions.workflow.update.clean());\n    })\n  }, [dispatch])\n\n  useEffect(() => {\n    if (saveStatus === 'completed') {\n      Ext.Msg.alert(t(\"workrequest.create_success_title\"), `${t(\"workrequest.request_no\")}: ${workrequestNo}`);\n      Ext.Msg.setHideAnimation(null);\n      setTimeout(() => {\n        history.goBack();\n      }, 1000)\n\n    }\n  }, [history, saveStatus, t, workrequestNo])\n\n  useEffect(() => {\n    refToTop?.current?.scrollIntoView();\n  }, [activeTab])\n\n  return (\n    <div className={classes.topSection} >\n      <PageHeader\n        showBack={true}\n        showNav={false}\n        title={t(title)}\n      />\n      <TabContainer\n        tabsData={tabsData}\n        activeTab={activeTab}\n        onChange={onTabChange}\n      />\n      <FormWrapper wrapperRef={refToTop}>\n        <WRForm activeTab={tabsData[activeTab - 1].type} onFieldChange={handleFieldChange} />\n      </FormWrapper>\n      <ActionPanel />\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}